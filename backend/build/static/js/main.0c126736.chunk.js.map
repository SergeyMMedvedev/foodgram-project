{"version":3,"sources":["components/Nav/Nav.js","components/Header/Header.js","components/Footer/Footer.js","components/Tags/Tags.js","components/CardList/CardList.js","images/testCardImg.png","components/Badge/Badge.js","utils/renderTags.js","ui/iconFavorite/iconFavorite.js","ui/iconPlus/iconPlus.js","ui/iconMinus/iconMinus.js","context/CurrentUserContext.js","utils/constants.js","utils/pagination.js","components/Button/Button.js","components/Card/Card.js","ui/iconLeft/iconLeft.js","ui/iconRight/iconRight.js","components/Pagination/Pagination.js","utils/Api.js","components/Recipes/Recipes.js","components/Form/Form.js","components/SubmitButton/SubmitButton.js","components/FromReg/FormReg.js","components/FormAuth/FormAuth.js","components/FormResetPassword/FormResetPassword.js","components/FormChangePassword/FormChangePassword.js","components/Recipe/Recipe.js","utils/getEndingsOfNumber.js","components/CardUser/CardUser.js","components/MyFollow/MyFollow.js","components/FormRecipeDropdownBlock/FormRecipeDropdownBlock.js","components/FormRecipe/FormRecipe.js","components/Favorite/Favorite.js","components/ShopListItem/ShopListItem.js","components/ShopList/ShopList.js","ui/iconTime/iconTime.js","ui/iconUser/iconUser.js","components/SingleRecipePage/SingleRecipePage.js","components/ProtectedRoute/ProtectedRoute.js","components/Popup/Popup.js","components/InfoTooltip/InfoTooltip.js","utils/Auth.js","components/App/App.js","utils/downloadFile.js","reportWebVitals.js","index.js"],"names":["Nav","isLoggedIn","onExit","purchases","className","exact","to","activeClassName","id","length","onClick","Header","Footer","href","Tags","main","selectedTags","onTagClick","onSetTagBreakfast","onSetTagTagDinner","onSetTagTagSupper","tagBreakfast","tagDinner","tagSupper","tagListRef","useRef","handleClick","e","target","value","classList","toggle","contains","remove","add","useEffect","current","Array","prototype","slice","call","children","forEach","li","includes","firstChild","elems","tags","map","tag","replace","item","ref","type","htmlFor","CardList","column","cn","Badge","tagName","renderTags","name","IconFavorite","active","big","IconPlus","IconMinus","React","createContext","API_BASE_URL","animatedGetItem","page","author","paginatorElements","containerWithLoadableItems","getItems","elem","find","Promise","resolve","setTimeout","then","loadedElementsContainer","getLengthOfPreviousPageNumber","pagination","previous","indexOf","getLengthOfNextPageNumber","next","cutPageNumberFromUrl","lengthOfPageNumber","substr","cutPageFromUrl","getCurrentPageNumber","getCurrentPageNumberWithRemovingItems","currentPage","Math","ceil","count","floor","getPaginationItem","key","pagination__item_active","getPaginationItemPlug","disabled","renderPaginationItem","params","selectedAuthor","paginatorRef","containerWithLoadableItemsRef","handlePageClick","paginatorItems","items","lastPage","i","push","Button","text","blue","lightBlue","sizeAuto","sizeSubscribe","styleNone","lightOrange","underline","buttonClassBame","button_size_auto","button_style_blue","button_disabled","button_size_subscribe","button_style_none","button_style_underline","Card","allRecipesPage","favoriteRecipesPage","subscribers","recipeId","recipeName","cookingTime","image","onAddToFavorites","onDeleteFromFavorites","onAddPurchase","onDeletePurchase","useState","isCardFavorite","setIsCardFavorite","purchaseId","setPurchaseId","currentUser","useContext","CurrentUserContext","cardRef","isSaved","some","username","purchase","data-id","src","testCardImg","alt","memo","IconLeft","inactive","IconRight","Pagination","aria-label","handlePreviousClick","handleNextClick","api","options","this","baseUrl","headers","a","loadingRecipes","fetch","response","json","recipes","ok","reject","message","loadingRecipe","recipe","method","status","startsWith","loadingIngredients","ingredients","formElem","token","loadingResponse","Authorization","body","responseData","errors","Object","keys","join","get","size","delete","JSON","stringify","favorite","blob","Recipes","favoriteRecipes","recipesPagination","getRecipes","onAuthorClick","setSelectedAuthor","onSubscribe","onUnsubscribe","subscriptions","setResponseError","setIsOpenInfoTooltip","useParams","isUserIsSubscribed","setIsUserIsSubscribed","recipesRef","getSubscriptions","data","results","catch","err","subscriptionId","cooking_time","image_url","Form","formRef","onSubmit","SubmitButton","loading","FormReg","serverError","setLoading","setName","nameError","setNameError","setUsername","usernameError","setUsernameError","email","setEmail","emailError","setEmailError","password","setPassword","passwordError","setPasswordError","preventDefault","onChange","validationMessage","minLength","required","form__error_active","form__error_server_active","FormAuth","maxLength","FormResetPassword","resetPasswordResponse","setServerError","setResetPasswordResponse","FormChangePassword","oldPassword","setOldPassword","oldPasswordError","setOldPasswordError","newPassword","setNewPassword","newPasswordError","setNewPasswordError","newPasswordAgain","setNewPasswordAgain","newPasswordAgainError","setNewPasswordAgainError","Recipe","getNumberEnding","number","stringNumber","toString","endsWith","CardUser","subscription","recipesList","setRecipesList","setRecipes","data-author","MyFollow","subscriptionsPagination","header","renderMainHeader","followsRef","FormRecipeDropdownBlock","ingredientList","onItemClick","units","ingredient","bind","FormRecipe","onDelete","setRecipeName","recipeNameError","setRecipeNameError","nameIngredient","setNameIngredient","nameUnits","setNameUnits","amountUnits","setAmountUnits","setCookingTime","cookingTimeError","setCookingTimeError","description","setDescription","descriptionError","setDescriptionError","setImage","setTags","ingredientChoiseList","setIngredientChoiseList","formDropdownRef","formGroupRef","showSubmitHint","setShowSubmitHint","addedIngredients","setAddedIngredients","handleIngredientDelete","currentIngredient","newAddedIngredients","filter","amount","handleImageChange","document","addEventListener","removeEventListener","getRecipe","dataTags","FormData","localStorage","getItem","selectedTag","newTags","getIngredients","min","max","rows","vaule","getElementById","Favorite","favoritesPagination","getFavoritesRecipes","favoriteRecipesRef","ShopListItem","shopItemRef","ShopList","onDownload","purchaseData","IconTime","IconUser","SingleRecipePage","setRecipe","getRecipeData","handleSubscribe","handleUnSubscribe","console","log","ProtectedRout","Component","component","props","path","history","useHistory","noAuthRedirect","Popup","isOpen","title","onClose","onMouseDown","evt","InfoTooltip","responseError","auth","loadingRegisterInfo","first_name","newUserRegistrationData","loadingAuthorizeInfo","authorizeData","loadingPasswordChangeInfo","old_password","new_password","new_password_again","changingPasswordData","contentInfo","Accept","App","setIsLoggedIn","authorRecipes","setAuthorRecipes","authorRecipesPagination","setAuthorRecipesPagination","setRecipesPagination","setFavoritesPagination","setCurrentUser","setFavoriteRecipes","setSubscriptions","setSubscriptionsPagination","setPurchases","setTagBreakfast","setTagDinner","setTagSupper","isOpenInfoTooltip","closeAllPopups","subscriptionsData","setIsUserisSubscribed","subscribe","handleUnsubscribe","unsubscribe","favorites","favoriteRiceps","getPurchases","purchasesData","handleAuthorClick","authorName","handleSetTagBreakfast","handleSetTagDinner","handleSetTagSupper","handleAddToPurchase","addPurchase","handleDeletePurchase","deletePurchase","handleAddToFavorites","addToFavoritesRecipes","handleRemoveFromFavorites","deleteFromFavoritesRecipes","renderTitleName","currentAuthor","handleEscClose","getContent","user","removeItem","tokenCheck","Provider","register","newUserInfo","setItem","finally","authorize","resetPassword","changePassword","ProtectedRoute","append","updateRecipe","window","location","assign","deleteRecipe","postRecipe","downloadPurchases","download","createElement","file","Blob","URL","createObjectURL","click","downloadAsFile","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.0c126736.chunk.js","sourcesContent":["import React from 'react';\nimport './Nav.css';\nimport { NavLink } from 'react-router-dom';\n\nfunction Nav({ isLoggedIn, onExit, purchases }) {\n  return (\n    <nav className=\"nav\">\n      <div className=\"nav__container container\">\n        {isLoggedIn ? (\n          <ul className=\"nav__items list\">\n            <li className=\"nav__item\"><NavLink exact to=\"/\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Рецепты</NavLink></li>\n            <li className=\"nav__item\"><NavLink to=\"/my-follow\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Мои подписки</NavLink></li>\n            <li className=\"nav__item\"><NavLink to=\"/form-recipe\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Создать рецепт</NavLink></li>\n            <li className=\"nav__item\"><NavLink to=\"/favorite\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Избранное</NavLink></li>\n            <li className=\"nav__item\">\n              <NavLink to=\"/shop-list\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Список покупок</NavLink>\n              <span className=\"badge badge_style_blue nav__badge\" id=\"counter\">\n                {(purchases.length > 0) ? purchases.length : ''}\n              </span>\n            </li>\n          </ul>\n        ) : (\n          <ul className=\"nav__items list\">\n            <li className=\"nav__item nav__item_disabled\"><NavLink exact to=\"/\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Рецепты</NavLink></li>\n            <li className=\"nav__item nav__item_disabled\"><p className=\"nav__link link nav__link_disabled\">Список покупок</p></li>\n          </ul>\n        )}\n        {isLoggedIn ? (\n          <ul className=\"nav__items list\">\n            <li className=\"nav__item\"><NavLink to=\"/change-password\" activeClassName=\"nav__link_active\" className=\"nav__link link\">Изменить пароль</NavLink></li>\n            <li className=\"nav__item\"><NavLink to=\"/signin\" onClick={onExit} activeClassName=\"nav__link_active\" className=\"nav__link link\">Выход</NavLink></li>\n          </ul>\n        ) : (\n          <ul className=\"nav__items list\">\n            <li className=\"nav__item\"><NavLink activeClassName=\"nav__link_active\" to=\"/signin\" className=\"nav__link link\">Войти</NavLink></li>\n            <li className=\"nav__item\"><NavLink activeClassName=\"nav__link_active\" to=\"/signup\" className=\"button button_style_blue\">Создать аккаунт</NavLink></li>\n          </ul>\n        )}\n      </div>\n    </nav>\n  );\n}\n\nexport default Nav;\n","import React from 'react';\nimport Nav from '../Nav/Nav';\n\nfunction Header({ isLoggedIn, onExit, purchases }) {\n  return (\n    <header className=\"header\">\n      <Nav\n        isLoggedIn={isLoggedIn}\n        onExit={onExit}\n        purchases={purchases}\n      />\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport './Footer.css';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <div className=\"footer__container container\">\n        <a href=\"/\" className=\"footer__brand link\">Продуктовый помощник</a>\n        <ul className=\"footer__items\">\n          <li className=\"footer__item\"><a href=\"/\" className=\"footer__link link\">Об авторе </a></li>\n          <li className=\"footer__item\"><a href=\"/\" className=\"footer__link link\">Технологии</a></li>\n        </ul>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React, { useEffect, useRef } from 'react';\nimport './Tags.css';\n\nfunction Tags({\n  main,\n  selectedTags,\n  onTagClick,\n  onSetTagBreakfast,\n  onSetTagTagDinner,\n  onSetTagTagSupper,\n  tagBreakfast,\n  tagDinner,\n  tagSupper,\n}) {\n  const tagListRef = useRef();\n  function handleClick(e) {\n    if (main) {\n      if (e.target.value === 'завтрак') {\n        e.target.classList.toggle('tags__checkbox_active');\n        onSetTagBreakfast();\n      }\n      if (e.target.value === 'обед') {\n        e.target.classList.toggle('tags__checkbox_active');\n        onSetTagTagDinner();\n      }\n      if (e.target.value === 'ужин') {\n        e.target.classList.toggle('tags__checkbox_active');\n        onSetTagTagSupper();\n      }\n    } else if (e.target.classList.contains('tags__checkbox_active')) {\n      const remove = true;\n      onTagClick(remove, e.target.value);\n      e.target.classList.remove('tags__checkbox_active');\n    } else {\n      const remove = false;\n      onTagClick(remove, e.target.value);\n      e.target.classList.add('tags__checkbox_active');\n    }\n  }\n\n  useEffect(() => {\n    if (selectedTags) {\n      if (selectedTags.length > 0 && tagListRef.current) {\n        Array.prototype.slice.call(tagListRef.current.children).forEach((li) => {\n          if (selectedTags.includes(li.firstChild.value)) li.firstChild.classList.add('tags__checkbox_active');\n        });\n      }\n    }\n  }, [selectedTags]);\n\n  // проверка, какие теги отмечены\n  useEffect(() => {\n    if (main && tagListRef.current) {\n      const elems = Array.prototype.slice.call(tagListRef.current.children);\n      const tags = [tagBreakfast, tagDinner, tagSupper].map((tag) => (\n        tag.replace('&tag__name=', '')\n      ));\n      elems.forEach((item) => {\n        if (tags.includes(item.firstChild.value)) {\n          item.firstChild.classList.add('tags__checkbox_active');\n        }\n      });\n    }\n  }, [tagBreakfast, tagDinner, tagSupper]);\n\n  return (\n    <ul ref={tagListRef} className=\"tags\">\n      <li className=\"tags__item\">\n        <button value=\"завтрак\" onClick={handleClick} type=\"button\" id=\"breakfast\" className=\"tags__checkbox tags__checkbox_style_orange\" />\n        <span className=\"tags__label\">Завтрак</span>\n      </li>\n      <li className=\"tags__item\">\n        <button value=\"обед\" onClick={handleClick} type=\"button\" id=\"lunch\" className=\"tags__checkbox tags__checkbox_style_green\" />\n        <span htmlFor=\"lunch\" className=\"tags__label\">Обед</span>\n      </li>\n      <li className=\"tags__item\">\n        <button value=\"ужин\" onClick={handleClick} type=\"button\" id=\"dinner\" className=\"tags__checkbox tags__checkbox_style_purple\" />\n        <span htmlFor=\"dinner\" className=\"tags__label\">Ужин</span>\n      </li>\n    </ul>\n  );\n}\n\nexport default Tags;\n","import React from 'react';\nimport './CardList.css';\nimport cn from 'classnames';\n\nfunction CardList({ children, column }) {\n  const className = cn('card-list', { 'card-list_column': column });\n  return (\n    <div className={className}>\n      {children}\n    </div>\n  );\n}\n\nexport default CardList;\n","export default __webpack_public_path__ + \"static/media/testCardImg.1b1bdc76.png\";","import React from 'react';\nimport './Badge.css';\n\nfunction Badge({ className, tagName }) {\n  return (\n    <li key={tagName} className=\"card__item\"><span className={`badge ${className}`}>{tagName}</span></li>\n  );\n}\n\nexport default Badge;\n","import React from 'react';\nimport Badge from '../components/Badge/Badge';\n\nexport default function renderTags(tags) {\n  let className;\n  if (tags) {\n    return tags.map((tag) => {\n      if (tag.name === 'завтрак') {\n        className = 'badge_style_orange';\n      } else if (tag.name === 'обед') {\n        className = 'badge_style_green';\n      } else {\n        className = 'badge_style_purple';\n      }\n      return (\n        <Badge\n          key={tag.name}\n          className={className}\n          tagName={tag.name}\n        />\n      );\n    });\n  }\n  return '';\n}\n","import React from 'react';\nimport './iconFavorite.css';\nimport cn from 'classnames';\n\nfunction IconFavorite({ active, big }) {\n  return (\n    <span className={cn('icon-favorite', { 'icon-favorite_big': big }, { 'icon-favorite_active': active })} />\n  );\n}\n\nexport default IconFavorite;\n","import React from 'react';\nimport './iconPlus.css';\n\nfunction IconPlus() {\n  return (\n    <span className=\"icon-plus button__icon\" />\n  );\n}\n\nexport default IconPlus;\n","import React from 'react';\nimport './iconMinus.css';\n\nfunction IconMinus() {\n  return (\n    <span className=\"icon-minus button__icon\" />\n  );\n}\n\nexport default IconMinus;\n","import React from 'react';\n\nexport default React.createContext();\n","export const API_BASE_URL_3 = 'http://127.0.0.1:8000/api/v1';\n// export const API_BASE_URL = 'http://localhost:8000/api/v1';\n// export const API_BASE_URL = 'http://127.0.0.1/api/v1';\nexport const API_BASE_URL = 'http://www.api.foodgram.students.nomoredomains.icu/api/v1';\n","import React from 'react';\nimport cn from 'classnames';\nimport { API_BASE_URL } from './constants';\nimport '../components/appearAnimation/appearAnimation.css';\n\n// для изменения количества выдачи элементов на страницу поменять здесь и в settings.py\n// REST_FRAMEWORK, PAGE_SIZE\nexport const PAGE_SIZE = 6;\n\n// принимает страницу, которую надо запросить (в формате page=...),\n// автора для фильтрации рецептов по его авторству (в формате &author__username=..., т.к. в джанго\n// чтобы работал встроенный filter_fields, нужно указать username модели User, к которой относится поле автора рецепта),\n// paginatorElements - это уже массив детей текущего рефа на ul со всеми эдементами пагинатора (кнопки страниц и стрелочки)\n// для того, чтобы найти среди них активный и плавно снять активность (добавив класс декативации),\n// containerWithLoadableItems - это контейнер в котором ul в котором будут все запрашиваемые элементы. Контейнер плавно исчезает\n// добавлением класса disappearAnimation, затем передается в getItems. Там у него в дальшейшем после ответа базы данных\n// убиарется класс disappearAnimation и добавляется appearAnimation для плавного появления уже новых элементов\nfunction animatedGetItem(page, author, paginatorElements, containerWithLoadableItems, getItems) {\n  const elem = paginatorElements.find((item) => (\n    item.classList.contains('pagination__item_active')\n  ));\n  const promise = new Promise((resolve) => {\n    if (containerWithLoadableItems) {\n      containerWithLoadableItems.classList.add('disappearAnimation');\n    }\n    if (elem) {\n      elem.classList.add('pagination__item_deactive');\n    }\n    setTimeout(() => (\n      resolve('done')\n    ), 100);\n  });\n  promise.then(() => {\n    getItems({ page, author, loadedElementsContainer: containerWithLoadableItems });\n  });\n}\n\n// возвращает количество символов номера предыдущей станицы\nfunction getLengthOfPreviousPageNumber(pagination) {\n  return (\n    pagination.previous.slice(\n      pagination.previous.indexOf('page=') + 5,\n      (pagination.previous.indexOf('&', pagination.previous.indexOf('page=') + 5) !== -1) ? (pagination.previous.indexOf('&')) : pagination.previous.length,\n    ).length\n  );\n}\n\n// возвращает количество символов номера следующей станицы\nfunction getLengthOfNextPageNumber(pagination) {\n  return (\n    pagination.next.slice(\n      pagination.next.indexOf('page=') + 5,\n      (pagination.next.indexOf('&', pagination.next.indexOf('page=') + 5) !== -1) ? (pagination.next.indexOf('&')) : pagination.next.length,\n    ).length\n  );\n}\n\n// вырезает из url номер страницы\nfunction cutPageNumberFromUrl(page, lengthOfPageNumber) {\n  return page.substr(page.indexOf('page=', API_BASE_URL.length) + 5, lengthOfPageNumber);\n}\n\n// вырезает из url параметр запроса страницы (кусок page=...)\nfunction cutPageFromUrl(page, lengthOfPageNumber) {\n  return page.substr(page.indexOf('page=', API_BASE_URL.length), 5 + lengthOfPageNumber);\n}\n\n// возвращает текущую страницу, на которой сейчас пользователь\nexport function getCurrentPageNumber(pagination) {\n  if (pagination.previous) {\n    if (!pagination.previous.includes('page=')) {\n      return 'page=2';\n    }\n    const lengthOfPageNumber = getLengthOfPreviousPageNumber(pagination);\n    return `page=${+cutPageNumberFromUrl(pagination.previous, lengthOfPageNumber) + 1}`;\n  }\n  if (pagination.next) {\n    const lengthOfPageNumber = getLengthOfNextPageNumber(pagination);\n    return `page=${+cutPageNumberFromUrl(pagination.next, lengthOfPageNumber) - 1}`;\n  }\n  return 'page=1';\n}\n\n// возвращает текущую страницу, на которой сейчас пользователь\n// но учитывает случаи, когда удаляется последний элемент со страницы и нужно вернуть уже предыдущую\nexport function getCurrentPageNumberWithRemovingItems(pagination) {\n  let currentPage = +getCurrentPageNumber(pagination).replace('page=', '');\n  if ((currentPage === Math.ceil(pagination.count / PAGE_SIZE)) && (pagination.count - Math.floor(pagination.count / PAGE_SIZE) * PAGE_SIZE) === 1) {\n    currentPage -= 1;\n    if (currentPage === 0) currentPage = 1;\n  }\n  return `page=${currentPage}`;\n}\n\n// удаляет из строки page=... и возвращает только число\nfunction getOnlyNumOfPage(page) {\n  return +page.replace('page=', '');\n}\n\nexport function handlePreviousClick(params) {\n  const {\n    pagination,\n    getItems,\n    selectedAuthor,\n    paginatorRef,\n    containerWithLoadableItemsRef,\n  } = params;\n  const paginatorItems = Array.prototype.slice.call(paginatorRef.current.children);\n  let containerWithLoadableItems;\n  if (containerWithLoadableItemsRef) {\n    containerWithLoadableItems = containerWithLoadableItemsRef.current;\n  }\n  if (pagination.previous) {\n    if (pagination.previous.includes('page=')) {\n      const lengthOfPageNumber = getLengthOfPreviousPageNumber(pagination);\n      const page = cutPageFromUrl(pagination.previous, lengthOfPageNumber);\n      animatedGetItem(page, selectedAuthor, paginatorItems, containerWithLoadableItems, getItems);\n    } else {\n      const page = 'page=1';\n      animatedGetItem(page, selectedAuthor, paginatorItems, containerWithLoadableItems, getItems);\n    }\n  }\n}\n\nexport function handleNextClick(params) {\n  const {\n    pagination,\n    getItems,\n    selectedAuthor,\n    paginatorRef,\n    containerWithLoadableItemsRef,\n  } = params;\n  const paginatorItems = Array.prototype.slice.call(paginatorRef.current.children);\n  let containerWithLoadableItems;\n  if (containerWithLoadableItemsRef) {\n    containerWithLoadableItems = containerWithLoadableItemsRef.current;\n  }\n  if (pagination.next) {\n    const lengthOfPageNumber = getLengthOfNextPageNumber(pagination);\n    const page = cutPageFromUrl(pagination.next, lengthOfPageNumber);\n    animatedGetItem(page, selectedAuthor, paginatorItems, containerWithLoadableItems, getItems);\n  }\n}\n\nfunction getPaginationItem(key, onClick, pagination) {\n  return (\n    <li key={key} className={cn('pagination__item', { pagination__item_active: `page=${key}` === (getCurrentPageNumber(pagination)) })}>\n      <button onClick={onClick} type=\"button\" className=\"pagination__link link\" value={`page=${key}`}>\n        {key}\n      </button>\n    </li>\n  );\n}\n\nfunction getPaginationItemPlug(key) {\n  return (\n    <li key={key} className=\"pagination__item\">\n      <button disabled type=\"button\" className=\"pagination__link link\">\n        ...\n      </button>\n    </li>\n  );\n}\n\nexport function renderPaginationItem(params) {\n  const {\n    pagination,\n    getItems,\n    selectedAuthor,\n    paginatorRef,\n    containerWithLoadableItemsRef,\n  } = params;\n  function handlePageClick(e) {\n    const page = e.target.value;\n    const paginatorItems = Array.prototype.slice.call(paginatorRef.current.children);\n    let containerWithLoadableItems;\n    if (containerWithLoadableItemsRef) {\n      containerWithLoadableItems = containerWithLoadableItemsRef.current;\n    }\n    animatedGetItem(page, selectedAuthor, paginatorItems, containerWithLoadableItems, getItems);\n  }\n  const items = [];\n  const currentPage = getOnlyNumOfPage(getCurrentPageNumber(pagination));\n  const lastPage = Math.ceil(pagination.count / PAGE_SIZE);\n\n  if (lastPage <= 7) {\n    for (let i = 1; i <= Math.ceil(pagination.count / PAGE_SIZE); i += 1) {\n      items.push(getPaginationItem(i, handlePageClick, pagination));\n    }\n    return items;\n  }\n  if (currentPage >= 1 && currentPage <= 3) {\n    items.push(getPaginationItem(1, handlePageClick, pagination));\n    for (let i = 2; i <= 5; i += 1) {\n      items.push(getPaginationItem(i, handlePageClick, pagination));\n    }\n    items.push(getPaginationItemPlug('...'));\n    items.push(getPaginationItem(lastPage, handlePageClick, pagination));\n    return items;\n  }\n\n  if (currentPage - 3 === 1) {\n    for (let i = 1; i <= currentPage + 2; i += 1) {\n      items.push(getPaginationItem(i, handlePageClick, pagination));\n    }\n    items.push(getPaginationItemPlug('...'));\n    items.push(getPaginationItem(lastPage, handlePageClick, pagination));\n    return items;\n  }\n\n  if (currentPage + 3 >= lastPage) {\n    items.push(getPaginationItem(1, handlePageClick, pagination));\n    items.push(getPaginationItemPlug('...'));\n    for (let i = lastPage - 5; i <= lastPage; i += 1) {\n      items.push(getPaginationItem(i, handlePageClick, pagination));\n    }\n    return items;\n  }\n  items.push(getPaginationItem(1, handlePageClick, pagination));\n  items.push(getPaginationItemPlug('...'));\n  for (let i = currentPage - 2; i <= currentPage + 2; i += 1) {\n    items.push(getPaginationItem(i, handlePageClick, pagination));\n  }\n  items.push(getPaginationItemPlug('...2'));\n  items.push(getPaginationItem(lastPage, handlePageClick, pagination));\n  return items;\n}\n","import React from 'react';\nimport './Button.css';\nimport cn from 'classnames';\n\nfunction Button({\n  text,\n  blue,\n  lightBlue,\n  sizeAuto,\n  onClick,\n  disabled,\n  sizeSubscribe,\n  styleNone,\n  lightOrange,\n  underline,\n}) {\n  const buttonClassBame = cn(\n    'button',\n    { 'button_style_light-blue': lightBlue },\n    { button_size_auto: sizeAuto },\n    { button_style_blue: blue },\n    { button_disabled: disabled },\n    { button_size_subscribe: sizeSubscribe },\n    { button_style_none: styleNone },\n    { 'button_style_light-orange': lightOrange },\n    { button_style_underline: underline },\n  );\n  return (\n    <button onClick={onClick} type=\"button\" className={buttonClassBame} name=\"subscribe\" disabled={disabled}>\n      {text}\n    </button>\n  );\n}\n\nexport default Button;\n","import React, {\n  useContext,\n  useEffect,\n  useState,\n  useRef,\n} from 'react';\nimport { Link } from 'react-router-dom';\nimport './Card.css';\nimport '../appearAnimation/appearAnimation.css';\nimport testCardImg from '../../images/testCardImg.png';\nimport renderTags from '../../utils/renderTags';\nimport IconFavorite from '../../ui/iconFavorite/iconFavorite';\nimport IconPlus from '../../ui/iconPlus/iconPlus';\nimport IconMinus from '../../ui/iconMinus/iconMinus';\nimport CurrentUserContext from '../../context/CurrentUserContext';\nimport { getCurrentPageNumber, getCurrentPageNumberWithRemovingItems } from '../../utils/pagination';\nimport Button from '../Button/Button';\n\nfunction Card({\n  allRecipesPage,\n  favoriteRecipesPage,\n  subscribers,\n  recipeId,\n  recipeName,\n  tags,\n  cookingTime,\n  image,\n  author,\n  onAddToFavorites,\n  onDeleteFromFavorites,\n  onAddPurchase,\n  pagination,\n  selectedAuthor,\n  onDeletePurchase,\n  purchases,\n}) {\n  const [isCardFavorite, setIsCardFavorite] = useState(false);\n  const [purchaseId, setPurchaseId] = useState('');\n  const currentUser = useContext(CurrentUserContext);\n  const cardRef = useRef();\n\n  function handleAddToPurchase() {\n    onAddPurchase(recipeId);\n  }\n\n  function handleAddToFavorites() {\n    onAddToFavorites(\n      recipeId,\n      getCurrentPageNumber(pagination),\n      selectedAuthor,\n      allRecipesPage,\n      favoriteRecipesPage,\n    );\n  }\n\n  function handleRemoveFromFavorites() {\n    onDeleteFromFavorites(\n      recipeId,\n      allRecipesPage ? getCurrentPageNumber(pagination) : getCurrentPageNumberWithRemovingItems(pagination),\n      selectedAuthor,\n      allRecipesPage,\n      favoriteRecipesPage,\n    );\n  }\n\n  function handlePurchaseDelete() {\n    onDeletePurchase(purchaseId);\n  }\n\n  useEffect(() => {\n    if (allRecipesPage) {\n      const isSaved = subscribers.some((item) => (\n        item.username === currentUser.username\n      ));\n      setIsCardFavorite(isSaved);\n    } else {\n      setIsCardFavorite(true);\n    }\n  }, [subscribers]);\n\n  useEffect(() => {\n    if (purchases) {\n      if (purchases.length === 0) {\n        setPurchaseId('');\n      } else {\n        const purchase = purchases.find((item) => (\n          item.purchase.id === recipeId\n        ));\n        if (purchase) {\n          setPurchaseId(purchase.id);\n        } else {\n          setPurchaseId('');\n        }\n      }\n    }\n  }, [purchases]);\n\n  return (\n    <div ref={cardRef} className=\"card appearAnimation\" data-id={`recipe__${recipeId}`}>\n      <Link to={`/single-page/${recipeId}`} className=\"link card__image-link\">\n        <img src={image || testCardImg} alt={recipeName} className=\"card__image\" />\n      </Link>\n      <div className=\"card__body\">\n        <Link className=\"card__title link\" to={`/single-page/${recipeId}`}>{recipeName}</Link>\n        <ul className=\"card__items\">\n          {renderTags(tags)}\n        </ul>\n        <div className=\"card__items card__items_column\">\n          <p className=\"card__text\">\n            <span className=\"icon-time\" />\n            {` ${cookingTime} мин.`}\n          </p>\n          <p className=\"card__text\">\n            <span className=\"icon-user\" />\n            <Link to={`/recipes/${author}`} className=\"card__name-link\">{` ${author}`}</Link>\n          </p>\n        </div>\n      </div>\n      <div className=\"card__footer\">\n        {(purchaseId && currentUser.name) ? (\n          <Button\n            text={(\n              <>\n                <IconMinus />\n                Убрать из покупок\n              </>\n            )}\n            onClick={handlePurchaseDelete}\n            lightOrange\n            disabled={!currentUser.name}\n          />\n\n        ) : (\n          <Button\n            text={(\n              <>\n                <IconPlus />\n                Добавить в покупки\n              </>\n            )}\n            onClick={handleAddToPurchase}\n            lightBlue\n            disabled={!currentUser.name}\n          />\n        )}\n\n        {currentUser.name && (\n          <Button\n            onClick={isCardFavorite ? handleRemoveFromFavorites : handleAddToFavorites}\n            text={(\n              <IconFavorite\n                active={isCardFavorite}\n              />\n            )}\n          />\n        )}\n\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(Card);\n","import React from 'react';\nimport './iconLeft.css';\nimport cn from 'classnames';\n\nfunction IconLeft({ inactive }) {\n  return (\n    <span className={cn('icon-left', { 'icon-left_inactive': inactive })} />\n  );\n}\n\nexport default IconLeft;\n","import React from 'react';\nimport './iconRight.css';\nimport cn from 'classnames';\n\nfunction IconRight({ inactive }) {\n  return (\n    <span className={cn('icon-right', { 'icon-right_inactive': inactive })} />\n  );\n}\n\nexport default IconRight;\n","import React, { useRef } from 'react';\nimport './Pagination.css';\n// import cn from 'classnames';\n// import { API_BASE_URL } from '../../utils/constants';\nimport IconLeft from '../../ui/iconLeft/iconLeft';\nimport IconRight from '../../ui/iconRight/iconRight';\nimport {\n  PAGE_SIZE,\n  renderPaginationItem,\n  handlePreviousClick,\n  handleNextClick,\n} from '../../utils/pagination';\n\nfunction Pagination({\n  pagination,\n  getItems,\n  selectedAuthor,\n  containerWithLoadableItemsRef,\n}) {\n  const paginatorRef = useRef();\n\n  return (\n    <>\n      {pagination.count > PAGE_SIZE && (\n        <nav className=\"pagination\" aria-label=\"Search results pages\">\n          <ul ref={paginatorRef} className=\"pagination__container\">\n            <li className=\"pagination__item\">\n              <button\n                onClick={() => {\n                  handlePreviousClick({\n                    pagination,\n                    getItems,\n                    selectedAuthor,\n                    paginatorRef,\n                    containerWithLoadableItemsRef,\n                  });\n                }}\n                type=\"button\"\n                className=\"pagination__link link\"\n              >\n                <IconLeft\n                  inactive={pagination.previous === null}\n                />\n              </button>\n            </li>\n            {renderPaginationItem({\n              pagination,\n              getItems,\n              selectedAuthor,\n              paginatorRef,\n              containerWithLoadableItemsRef,\n            }).map((item) => item)}\n            <li className=\"pagination__item\">\n              <button\n                onClick={() => {\n                  handleNextClick({\n                    pagination,\n                    getItems,\n                    selectedAuthor,\n                    paginatorRef,\n                    containerWithLoadableItemsRef,\n                  });\n                }}\n                type=\"button\"\n                className=\"pagination__link link\"\n              >\n                <IconRight\n                  inactive={pagination.next === null}\n                />\n              </button>\n            </li>\n          </ul>\n        </nav>\n      )}\n    </>\n  );\n}\n\nexport default React.memo(Pagination);\n","import { API_BASE_URL } from './constants';\n\nclass Api {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.headers = options.headers;\n  }\n\n  async getRecipes(params) {\n    const {\n      page = 'page=1',\n      author = '',\n      tagBreakfast = '',\n      tagDinner = '',\n      tagSupper = '',\n    } = params;\n    const loadingRecipes = fetch((`${this.baseUrl}/recipes/?${page}${author}${tagBreakfast}${tagDinner}${tagSupper}`), {\n      headers: this.headers,\n    });\n    const response = await loadingRecipes;\n    const recipes = await response.json();\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${recipes.message}`);\n    }\n    return new Promise((resolve) => {\n      resolve(recipes);\n    });\n  }\n\n  async getRecipe(recipeId) {\n    const loadingRecipe = fetch((`${this.baseUrl}/recipes/${recipeId}`), {\n      headers: this.headers,\n    });\n    const response = await loadingRecipe;\n    const recipe = await response.json();\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${recipe.message}`);\n    }\n    return new Promise((resolve) => {\n      resolve(recipe);\n    });\n  }\n\n  async deleteRecipe(recipeId) {\n    const loadingRecipe = fetch((`${this.baseUrl}/recipes/${recipeId}`), {\n      method: 'DELETE',\n      headers: this.headers,\n    });\n    const response = await loadingRecipe;\n    if (!(response.status === 204)) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return new Promise((resolve) => {\n      resolve(response.status);\n    });\n  }\n\n  async getIngredients(startsWith) {\n    const loadingIngredients = fetch((`${this.baseUrl}/ingredients?search=${startsWith}`), {\n      headers: this.headers,\n    });\n    const response = await loadingIngredients;\n    const ingredients = await response.json();\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${ingredients.message}`);\n    }\n    return new Promise((resolve) => {\n      resolve(ingredients);\n    });\n  }\n\n  async postRecipe(recipe, formElem, token) {\n    const loadingResponse = fetch((`${this.baseUrl}/recipes/`), {\n      method: 'POST',\n      headers: {\n        Authorization: `Token ${token}`,\n      },\n      body: formElem,\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async updateRecipe(formElem, token, recipeId) {\n    const image = formElem.get('image');\n    // если фотография не передается при редактировании рецепта, то надо исключить\n    // это поле полностью, чтобы оно не передавалось пустым и не возникала ошибка сериализации\n    // фотография останется, какая было до редактирования\n    if (!image.name || !image.size) {\n      formElem.delete('image');\n    }\n    // токен передаем отдельно, т.к. this.headers не подходит из-за того, что body не json\n    const loadingResponse = fetch((`${this.baseUrl}/recipes/${recipeId}/`), {\n      method: 'PATCH',\n      headers: {\n        Authorization: `Token ${token}`,\n      },\n      body: formElem,\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async getSubscriptions(params) {\n    const { page = 'page=1', author = '' } = params;\n    const loadingResponse = fetch((`${this.baseUrl}/subscriptions/?${page}${author}`), {\n      method: 'GET',\n      headers: this.headers,\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async subscribe(author) {\n    const loadingResponse = fetch((`${this.baseUrl}/subscriptions/`), {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        author,\n      }),\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async unsubscribe(id) {\n    const loadingResponse = fetch((`${this.baseUrl}/subscriptions/${id}/`), {\n      method: 'DELETE',\n      headers: this.headers,\n    });\n    const response = await loadingResponse;\n    if (!(response.status === 204)) {\n      return Promise.reject(`Ошибка! ${response.status}`);\n    }\n    return new Promise((resolve) => {\n      resolve(response.status);\n    });\n  }\n\n  async getFavoritesRecipes(params) {\n    const {\n      page = 'page=1',\n      tagBreakfast = '',\n      tagDinner = '',\n      tagSupper = '',\n    } = params;\n    const loadingResponse = fetch((`${this.baseUrl}/favorites/?${page}${tagBreakfast}${tagDinner}${tagSupper}`), {\n      method: 'GET',\n      headers: this.headers,\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async addToFavoritesRecipes(recipeId) {\n    const loadingResponse = fetch((`${this.baseUrl}/favorites/`), {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        favorite: recipeId,\n      }),\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async deleteFromFavoritesRecipes(id) {\n    const loadingResponse = fetch((`${this.baseUrl}/favorites/${+id}/`), {\n      method: 'DELETE',\n      headers: this.headers,\n    });\n    const response = await loadingResponse;\n    if (!(response.status === 204)) {\n      return Promise.reject(`Ошибка! ${response.status}`);\n    }\n    return new Promise((resolve) => {\n      resolve(response.status);\n    });\n  }\n\n  async getPurchases() {\n    const loadingResponse = fetch((`${this.baseUrl}/purchases/`), {\n      method: 'GET',\n      headers: this.headers,\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async addPurchase(recipeId) {\n    const loadingResponse = fetch((`${this.baseUrl}/purchases/`), {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        purchase: recipeId,\n      }),\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async deletePurchase(id) {\n    const loadingResponse = fetch((`${this.baseUrl}/purchases/${+id}/`), {\n      method: 'DELETE',\n      headers: this.headers,\n    });\n    const response = await loadingResponse;\n    if (!(response.status === 204)) {\n      return Promise.reject(`Ошибка! ${response.status}`);\n    }\n    return new Promise((resolve) => {\n      resolve(response.status);\n    });\n  }\n\n  async download(purchases) {\n    const loadingResponse = fetch((`${this.baseUrl}/download/`), {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify(purchases),\n    });\n    const response = await loadingResponse;\n    const responseData = await response.blob();\n    if (!response.ok) {\n      return Promise.reject('Ошибка!');\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n}\n\nconst api = new Api({\n  baseUrl: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;\n","import React, {\n  useEffect,\n  useContext,\n  useState,\n  useRef,\n} from 'react';\nimport { useParams } from 'react-router-dom';\nimport './Recipes.css';\nimport CardList from '../CardList/CardList';\nimport Card from '../Card/Card';\nimport Pagination from '../Pagination/Pagination';\nimport CurrentUserContext from '../../context/CurrentUserContext';\nimport Button from '../Button/Button';\nimport api from '../../utils/Api';\n\nfunction Recipes({\n  recipes,\n  favoriteRecipes,\n  onAddToFavorites,\n  onDeleteFromFavorites,\n  onAddPurchase,\n  recipesPagination,\n  getRecipes,\n  onAuthorClick,\n  selectedAuthor,\n  setSelectedAuthor,\n  onSubscribe,\n  onUnsubscribe,\n  subscriptions,\n  onDeletePurchase,\n  purchases,\n  setResponseError,\n  setIsOpenInfoTooltip,\n}) {\n  const params = useParams();\n  const currentUser = useContext(CurrentUserContext);\n  const [isUserIsSubscribed, setIsUserIsSubscribed] = useState(null);\n  const recipesRef = useRef();\n\n  function handleSubscribe() {\n    onSubscribe(params.author, setIsUserIsSubscribed);\n  }\n\n  function handleUnSubscribe() {\n    api.getSubscriptions({ author: `&author=${params.author}` })\n      .then((data) => {\n        if (data.results) {\n          onUnsubscribe({\n            subscriptionId: data.results[0].id,\n            setIsUserIsSubscribed,\n          });\n        }\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  useEffect(() => {\n    if (params.author && currentUser.name) {\n      api.getSubscriptions({ author: `&author=${params.author}` })\n        .then((data) => {\n          if (data.results) setIsUserIsSubscribed(data.results.length > 0);\n        })\n        .catch((err) => {\n          setResponseError(err);\n          setIsOpenInfoTooltip(true);\n        });\n    }\n  }, [currentUser, params.author, subscriptions]);\n\n  useEffect(() => {\n    if (params.author) {\n      setSelectedAuthor(`&author__username=${params.author}`);\n    }\n  }, [setSelectedAuthor, params, params.author]);\n\n  return (\n    <>\n      {(params.author && params.author !== currentUser.name) && (\n        (isUserIsSubscribed) ? (\n          <div className=\"recipe__button-container\">\n            <Button\n              lightBlue\n              text=\"Отписаться\"\n              onClick={handleUnSubscribe}\n            />\n          </div>\n        ) : (\n          currentUser.name && (\n            <div className=\"recipe__button-container\">\n              <Button\n                lightBlue\n                text=\"Подписаться на автора\"\n                onClick={handleSubscribe}\n              />\n            </div>\n          )\n        )\n      )}\n      <div ref={recipesRef}>\n        <CardList>\n          {recipes.map((recipe) => (\n            <Card\n              key={`card__${recipe.id}`}\n              allRecipesPage\n              subscribers={recipe.subscribers}\n              recipeId={recipe.id}\n              recipeName={recipe.name}\n              tags={recipe.tag}\n              cookingTime={recipe.cooking_time}\n              image={recipe.image_url}\n              author={recipe.author}\n              onAddToFavorites={onAddToFavorites}\n              onDeleteFromFavorites={onDeleteFromFavorites}\n              onAddPurchase={onAddPurchase}\n              favoriteRecipes={favoriteRecipes}\n              pagination={recipesPagination}\n              onAuthorClick={onAuthorClick}\n              selectedAuthor={selectedAuthor}\n              onDeletePurchase={onDeletePurchase}\n              purchases={purchases}\n            />\n          ))}\n        </CardList>\n      </div>\n      <Pagination\n        pagination={recipesPagination}\n        getItems={getRecipes}\n        selectedAuthor={selectedAuthor}\n        containerWithLoadableItemsRef={recipesRef}\n      />\n\n    </>\n  );\n}\n\nexport default Recipes;\n","import React from 'react';\nimport './Form.css';\n\nfunction Form({\n  formRef,\n  children,\n  onSubmit,\n}) {\n  return (\n    <div className=\"form-container\">\n      <form ref={formRef} className=\"form\" onSubmit={onSubmit}>\n        {children}\n      </form>\n    </div>\n  );\n}\n\nexport default Form;\n","import React from 'react';\nimport './SubmitButton.css';\nimport cn from 'classnames';\n\nfunction SubmitButton({\n  text,\n  blue,\n  lightBlue,\n  sizeAuto,\n  disabled,\n  loading,\n}) {\n  const buttonClassBame = cn(\n    'submit-button',\n    { 'submit-button_style_light-blue': lightBlue },\n    { 'submit-button_size_auto': sizeAuto },\n    { 'submit-button_style_blue': blue },\n    { 'submit-button_disabled': disabled },\n  );\n  return (\n    <input type=\"submit\" className={buttonClassBame} name=\"subscribe\" value={loading ? 'Отправка...' : text} disabled={disabled} />\n  );\n}\n\nexport default SubmitButton;\n","import React, { useState } from 'react';\nimport cn from 'classnames';\nimport './FormReg.css';\nimport Form from '../Form/Form';\nimport SubmitButton from '../SubmitButton/SubmitButton';\n\nfunction FormReg({ onSubmit, serverError }) {\n  const [loading, setLoading] = useState(false);\n  const [name, setName] = useState('');\n  const [nameError, setNameError] = useState('');\n  const [username, setUsername] = useState('');\n  const [usernameError, setUsernameError] = useState('');\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    setNameError(e.target.validationMessage);\n  }\n\n  function handleUsernameChange(e) {\n    setUsername(e.target.value);\n    setUsernameError(e.target.validationMessage);\n  }\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n    setEmailError(e.target.validationMessage);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n    setPasswordError(e.target.validationMessage);\n  }\n\n  function handleRegistrationSubmit(e) {\n    setLoading(true);\n    e.preventDefault();\n    onSubmit(name, username, email, password, setLoading);\n  }\n\n  return (\n    <Form\n      onSubmit={handleRegistrationSubmit}\n    >\n      <div className=\"form__group\">\n        <span htmlFor=\"id_first_name\" className=\"form__label\">\n          Имя\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={name}\n            onChange={handleNameChange}\n            type=\"text\"\n            name=\"first_name\"\n            id=\"id_first_name\"\n            className=\"form__input\"\n            minLength=\"2\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: nameError })}>{nameError}</span>\n        </div>\n      </div>\n\n      <div className=\"form__group\">\n        <span htmlFor=\"id_username\" className=\"form__label\">\n          Имя пользователя\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={username}\n            onChange={handleUsernameChange}\n            type=\"text\"\n            name=\"username\"\n            id=\"id_username\"\n            className=\"form__input\"\n            minLength=\"2\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: usernameError })}>{usernameError}</span>\n        </div>\n      </div>\n\n      <div className=\"form__group\">\n        <span htmlFor=\"id_email\" className=\"form__label\">\n          Адрес электронной почты\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={email}\n            onChange={handleEmailChange}\n            type=\"email\"\n            name=\"email\"\n            id=\"id_email\"\n            className=\"form__input\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: emailError })}>{emailError}</span>\n        </div>\n      </div>\n\n      <div className=\"form__group\">\n        <span htmlFor=\"id_password\" className=\"form__label\">\n          Пароль\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={password}\n            onChange={handlePasswordChange}\n            type=\"password\"\n            name=\"password\"\n            id=\"id_password\"\n            className=\"form__input\"\n            minLength=\"8\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: passwordError })}>{passwordError}</span>\n        </div>\n      </div>\n      <span className={cn('form__error form__error_server', { form__error_server_active: serverError })}>{serverError}</span>\n      <div className=\"form__footer\">\n        <SubmitButton\n          lightBlue\n          text=\"Создать аккаунт\"\n          disabled={loading || nameError || usernameError || emailError || passwordError || (!name || !username || !email || !password)}\n          loading={loading}\n        />\n      </div>\n    </Form>\n  );\n}\n\nexport default FormReg;\n","import React, { useState } from 'react';\nimport './FormAuth.css';\nimport cn from 'classnames';\nimport SubmitButton from '../SubmitButton/SubmitButton';\nimport Form from '../Form/Form';\n\nfunction FormAuth({ onSubmit, serverError }) {\n  const [loading, setLoading] = useState(false);\n  const [username, setUsername] = useState('');\n  const [usernameError, setUsernameError] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n\n  function handleUsernameChange(e) {\n    setUsername(e.target.value);\n    setUsernameError(e.target.validationMessage);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n    setPasswordError(e.target.validationMessage);\n  }\n\n  function handleLoginSubmit(e) {\n    setLoading(true);\n    e.preventDefault();\n    onSubmit(username, password, setLoading);\n  }\n\n  return (\n    <Form\n      onSubmit={handleLoginSubmit}\n    >\n      <div className=\"form__group\">\n        <span htmlFor=\"id_username\" className=\"form__label\">\n          Имя пользователя\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={username}\n            onChange={handleUsernameChange}\n            type=\"text\"\n            name=\"username\"\n            id=\"id_username\"\n            className=\"form__input\"\n            minLength=\"2\"\n            maxLength=\"30\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: usernameError })}>{usernameError}</span>\n        </div>\n      </div>\n\n      <div className=\"form__group\">\n        <span htmlFor=\"id_password\" className=\"form__label\">\n          Пароль\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={password}\n            onChange={handlePasswordChange}\n            type=\"password\"\n            name=\"password\"\n            id=\"id_password\"\n            className=\"form__input\"\n            minLength=\"8\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: passwordError })}>{passwordError}</span>\n        </div>\n      </div>\n      <span className={cn('form__error form__error_server', { form__error_server_active: serverError })}>{serverError}</span>\n      <div className=\"form__footer\">\n        <SubmitButton\n          lightBlue\n          text=\"Войти\"\n          disabled={loading || usernameError || passwordError || (!username || !password)}\n          loading={loading}\n        />\n        <a href=\"/reset-password\" className=\"form__forgot-link\">Забыли пароль?</a>\n      </div>\n    </Form>\n  );\n}\n\nexport default FormAuth;\n","import React, { useState } from 'react';\nimport cn from 'classnames';\nimport './FormResetPassword.css';\nimport Form from '../Form/Form';\nimport SubmitButton from '../SubmitButton/SubmitButton';\n\nfunction FormResetPassword({\n  onSubmit,\n  serverError,\n  resetPasswordResponse,\n  setServerError,\n  setResetPasswordResponse,\n}) {\n  const [loading, setLoading] = useState(false);\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n\n  function handleChange(e) {\n    setEmail(e.target.value);\n    setEmailError(e.target.validationMessage);\n    setServerError('');\n    setResetPasswordResponse('');\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    onSubmit(email, setLoading);\n    setServerError('');\n  }\n\n  return (\n    <Form\n      onSubmit={handleSubmit}\n    >\n      <p className=\"form__info-text\">\n        Чтобы сбросить старый пароль — введите адрес электронной почты, под которым вы регистрировались.\n      </p>\n      <div className=\"form__group\">\n        <span htmlFor=\"id_email\" className=\"form__label\">\n          Адрес электронной почты\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={email}\n            onChange={handleChange}\n            type=\"email\"\n            name=\"email\"\n            id=\"id_email\"\n            className=\"form__input\"\n          />\n          <span className={cn('form__error', { form__error_active: emailError })}>{emailError}</span>\n        </div>\n      </div>\n      <span className={cn('form__error form__error_server', { form__error_server_active: serverError })}>{serverError}</span>\n      <span className={cn('form__reset-info', { 'form__reset-info_active': resetPasswordResponse.status === 'OK' })}>\n        {`Проверьте Ваш почтовый ящик. На указанный адрес ${email} было отправлено письмо для подтверждения сброса пароля.`}\n      </span>\n      <div className=\"form__footer\">\n        <SubmitButton\n          lightBlue\n          text=\"Сбросить пароль\"\n          disabled={loading || emailError || !email}\n          loading={loading}\n        />\n      </div>\n    </Form>\n  );\n}\n\nexport default FormResetPassword;\n","import React, { useState } from 'react';\nimport cn from 'classnames';\nimport './FormChangePassword.css';\nimport Form from '../Form/Form';\nimport SubmitButton from '../SubmitButton/SubmitButton';\n\nfunction FormChangePassword({ onSubmit, serverError }) {\n  const [loading, setLoading] = useState(false);\n  const [oldPassword, setOldPassword] = useState('');\n  const [oldPasswordError, setOldPasswordError] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [newPasswordError, setNewPasswordError] = useState('');\n  const [newPasswordAgain, setNewPasswordAgain] = useState('');\n  const [newPasswordAgainError, setNewPasswordAgainError] = useState('');\n\n  function handleOldPasswordChange(e) {\n    setOldPassword(e.target.value);\n    setOldPasswordError(e.target.validationMessage);\n  }\n\n  function handleNewPasswordChange(e) {\n    setNewPassword(e.target.value);\n    setNewPasswordError(e.target.validationMessage);\n  }\n\n  function handleNewPasswordAgainChange(e) {\n    setNewPasswordAgain(e.target.value);\n    setNewPasswordAgainError(e.target.validationMessage);\n  }\n\n  function handleChangePassword(e) {\n    setLoading(true);\n    e.preventDefault();\n    onSubmit(oldPassword, newPassword, newPasswordAgain, setLoading);\n  }\n\n  return (\n    <Form\n      onSubmit={handleChangePassword}\n    >\n      <div className=\"form__group\">\n        <span htmlFor=\"id_oldPassword\" className=\"form__label\">\n          Старый пароль\n        </span>\n        <div className=\"form__field-group\">\n          <input\n            value={oldPassword}\n            onChange={handleOldPasswordChange}\n            type=\"text\"\n            name=\"old_password\"\n            id=\"id_oldPassword\"\n            className=\"form__input\"\n            minLength=\"8\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: oldPasswordError })}>{oldPasswordError}</span>\n        </div>\n      </div>\n      <div className=\"form__group\">\n        <span htmlFor=\"id_newPassword\" className=\"form__label\">Новый пароль</span>\n        <div className=\"form__field-group\">\n          <input\n            value={newPassword}\n            onChange={handleNewPasswordChange}\n            type=\"password\"\n            name=\"new_password\"\n            id=\"id_newPassword\"\n            className=\"form__input\"\n            minLength=\"8\"\n            required\n          />\n          <span className=\"form__input-info\">Ваш пароль не должен совпадать с вашим именем или другой персональной информацией или быть слишком похожим на неё.</span>\n          <span className=\"form__input-info\">Ваш пароль должен содержать как минимум 8 символов.</span>\n          <span className=\"form__input-info\">Ваш пароль не может быть одним из широко распространённых паролей.</span>\n          <span className=\"form__input-info\">Ваш пароль не может состоять только из цифр.</span>\n          <span className={cn('form__error', { form__error_active: newPasswordError })}>{newPasswordError}</span>\n        </div>\n      </div>\n      <div className=\"form__group\">\n        <span htmlFor=\"id_confirmPassword\" className=\"form__label\">Подтверждение нового пароля</span>\n        <div className=\"form__field-group\">\n          <input\n            value={newPasswordAgain}\n            onChange={handleNewPasswordAgainChange}\n            type=\"password\"\n            name=\"confirm_password\"\n            id=\"id_confirmPassword\"\n            className=\"form__input\"\n            minLength=\"8\"\n            required\n          />\n          <span className={cn('form__error', { form__error_active: newPasswordAgainError })}>{newPasswordAgainError}</span>\n        </div>\n      </div>\n      <span className={cn('form__error form__error_server', { form__error_server_active: serverError })}>{serverError}</span>\n      <SubmitButton\n        lightBlue\n        text=\"Изменить пароль\"\n        disabled={loading || oldPasswordError || newPasswordError || newPasswordAgainError || (!oldPassword || !newPassword || !newPasswordAgain)}\n        loading={loading}\n      />\n    </Form>\n  );\n}\n\nexport default FormChangePassword;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './Recipe.css';\nimport testCardImg from '../../images/testCardImg.png';\n\nfunction Recipe({ recipe }) {\n  return (\n    <div className=\"recipe\">\n      <Link to={`/single-page/${recipe.id}`} className=\"recipe__image-link link\">\n        <img src={testCardImg} alt={recipe.name} className=\"recipe__image\" />\n      </Link>\n      <Link to={`/single-page/${recipe.id}`} className=\"recipe__title-link link\">\n        <h3 className=\"recipe__title\">{recipe.name}</h3>\n      </Link>\n      <p className=\"recipe__text\">\n        <span className=\"icon-time\" />\n        {` ${recipe.cooking_time}`}\n      </p>\n    </div>\n  );\n}\n\nexport default React.memo(Recipe);\n","export default function getNumberEnding(number) {\n  const stringNumber = number.toString();\n  if (number >= 1) {\n    if (['11', '12', '13', '14', '15', '16', '17', '18', '19'].includes(stringNumber.slice((stringNumber.length - 2), stringNumber.length))) {\n      return 'рецептов';\n    }\n    if (['40', '90'].includes(stringNumber.slice((stringNumber.length - 2), stringNumber.length))) {\n      return 'рецептов';\n    }\n    if (stringNumber.endsWith('100')) {\n      return 'рецептов';\n    }\n\n    if (stringNumber.endsWith('1')) {\n      return 'рецепт';\n    }\n    if (['2', '3', '4'].includes(stringNumber[stringNumber.length - 1])) {\n      return 'рецепта';\n    }\n    if (stringNumber.endsWith('00')) {\n      return 'рецептов';\n    }\n    return 'рецепт';\n  }\n  return 'рецепт';\n}\n","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport './CardUser.css';\nimport '../appearAnimation/appearAnimation.css';\nimport Recipe from '../Recipe/Recipe';\nimport api from '../../utils/Api';\nimport getNumberEnding from '../../utils/getEndingsOfNumber';\nimport { getCurrentPageNumberWithRemovingItems } from '../../utils/pagination';\n\nfunction CardUser({\n  onUnsubscribe,\n  subscription,\n  pagination,\n  setResponseError,\n  setIsOpenInfoTooltip,\n}) {\n  const [recipesList, setRecipesList] = useState([]);\n  const [recipes, setRecipes] = useState([]);\n\n  useEffect(() => {\n    api.getRecipes({ author: `&author__username=${subscription.author}` })\n      .then((data) => {\n        setRecipesList(data.results);\n        setRecipes(data);\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }, []);\n\n  function handleUnSubscribe() {\n    onUnsubscribe({\n      subscriptionId: subscription.id,\n      page: getCurrentPageNumberWithRemovingItems(pagination),\n    });\n  }\n\n  return (\n    <>\n      <div className=\"card-user appearAnimation\" data-author={subscription.id}>\n        <div className=\"card-user__header\">\n          <Link to={`/recipes/${subscription.author}`} className=\"card-user__title\">{subscription.author}</Link>\n        </div>\n        <div className=\"card-user__body\">\n          <ul className=\"card-user__items\">\n            {recipesList.length > 0 ? (\n              <>\n                <>\n                  {recipesList.slice(0, 3).map((recipe) => (\n                    <li className=\"card-user__item\" key={recipe.id}>\n                      <Recipe\n                        recipe={recipe}\n                      />\n                    </li>\n                  ))}\n                </>\n                <>\n                  {recipesList.slice(3).length > 0 && (\n                    <li className=\"card-user__item\">\n                      <Link to={`/recipes/${subscription.author}`} className=\"card-user__link link\">{`Еще ${(recipes.count - 3 > 0) && `${recipes.count - 3} ${getNumberEnding((recipes.count - 3))}`}...`}</Link>\n                    </li>\n                  )}\n                </>\n              </>\n            ) : (\n              <p className=\"card-user__text\">у автора пока нет рецептов</p>\n            )}\n          </ul>\n        </div>\n        <div className=\"card-user__footer\">\n          <button onClick={handleUnSubscribe} type=\"button\" className=\"button button_style_light-blue button_size_auto\" name=\"subscribe\">\n            Отписаться\n          </button>\n        </div>\n      </div>\n\n    </>\n  );\n}\n\nexport default React.memo(CardUser);\n","import React, { useRef } from 'react';\nimport './MyFollow.css';\nimport CardList from '../CardList/CardList';\nimport CardUser from '../CardUser/CardUser';\nimport Pagination from '../Pagination/Pagination';\n\nfunction MyFollow({\n  onUnsubscribe,\n  subscriptions,\n  getSubscriptions,\n  subscriptionsPagination,\n  header,\n  renderMainHeader,\n  setResponseError,\n  setIsOpenInfoTooltip,\n}) {\n  const followsRef = useRef();\n  return (\n    <>\n      {renderMainHeader(header)}\n      <div ref={followsRef}>\n        <CardList>\n          {subscriptions.map((subscription) => (\n            <CardUser\n              key={subscription.id}\n              onUnsubscribe={onUnsubscribe}\n              subscription={subscription}\n              pagination={subscriptionsPagination}\n              setResponseError={setResponseError}\n              setIsOpenInfoTooltip={setIsOpenInfoTooltip}\n            />\n          ))}\n        </CardList>\n      </div>\n      <Pagination\n        pagination={subscriptionsPagination}\n        getItems={getSubscriptions}\n        containerWithLoadableItemsRef={followsRef}\n      />\n    </>\n  );\n}\n\nexport default MyFollow;\n","import React from 'react';\nimport './FormRecipeDropdownBlock.css';\nimport cn from 'classnames';\n\nfunction FormRecipeDropdownBlock({\n  ingredientList,\n  onItemClick,\n}) {\n  const className = cn('form__dropdown-items', { 'form__dropdown-items_active': ingredientList.length > 0 });\n\n  function handleClick(name, units) {\n    onItemClick(name, units);\n  }\n\n  return (\n    <ul className={className}>\n      {ingredientList.map((ingredient) => (\n        <li key={ingredient.id} className=\"form__dropdown-item\">\n          <button type=\"button\" className=\"form__dropdown-item-btn\" onClick={handleClick.bind(this, ingredient.name, ingredient.units)}>{ingredient.name}</button>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default FormRecipeDropdownBlock;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './FormRecipe.css';\nimport cn from 'classnames';\nimport Form from '../Form/Form';\nimport Tags from '../Tags/Tags';\nimport api from '../../utils/Api';\nimport FormRecipeDropdownBlock from '../FormRecipeDropdownBlock/FormRecipeDropdownBlock';\nimport SubmitButton from '../SubmitButton/SubmitButton';\nimport Button from '../Button/Button';\n\nfunction FormRecipe({\n  onSubmit,\n  serverError,\n  header,\n  renderMainHeader,\n  onDelete,\n  setResponseError,\n  setIsOpenInfoTooltip,\n}) {\n  const { recipeId } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [recipeName, setRecipeName] = useState('');\n  const [recipeNameError, setRecipeNameError] = useState('');\n  const [nameIngredient, setNameIngredient] = useState('');\n  const [nameUnits, setNameUnits] = useState('');\n  const [amountUnits, setAmountUnits] = useState('');\n  const [cookingTime, setCookingTime] = useState('');\n  const [cookingTimeError, setCookingTimeError] = useState('');\n  const [description, setDescription] = useState('');\n  const [descriptionError, setDescriptionError] = useState('');\n  const [image, setImage] = useState('');\n  const [tags, setTags] = useState([]);\n  const [ingredientChoiseList, setIngredientChoiseList] = useState([]);\n  const formDropdownRef = useRef();\n  const formGroupRef = useRef();\n  const formRef = useRef();\n  const [showSubmitHint, setShowSubmitHint] = useState(false);\n\n  const [addedIngredients, setAddedIngredients] = useState([]);\n\n  function handleRecipeNameChange(e) {\n    setRecipeName(e.target.value);\n    setRecipeNameError(e.target.validationMessage);\n  }\n\n  function handleNameIngredientChange(e) {\n    setNameIngredient(e.target.value);\n    if (e.target.value) {\n      api.getIngredients(e.target.value)\n        .then((data) => {\n          setIngredientChoiseList(data);\n        })\n        .catch((err) => {\n          setResponseError(err);\n          setIsOpenInfoTooltip(true);\n        });\n    } else {\n      setIngredientChoiseList([]);\n    }\n  }\n\n  function handleAmountChange(e) {\n    setAmountUnits(e.target.value);\n  }\n\n  function handleItemClick(name, units) {\n    setNameIngredient(name);\n    setNameUnits(units);\n  }\n\n  function handleAddIngredient() {\n    if (nameIngredient && amountUnits && nameUnits) {\n      addedIngredients.push({ name: nameIngredient, amount: amountUnits, units: nameUnits });\n      const newAddedIngredients = addedIngredients.slice();\n      setAddedIngredients(newAddedIngredients);\n      setNameIngredient('');\n      setNameUnits('');\n      setAmountUnits('');\n    }\n  }\n\n  function handkeCookingTimeChange(e) {\n    if (e.target.value <= 999) {\n      setCookingTime(e.target.value);\n    }\n    setCookingTimeError(e.target.validationMessage);\n  }\n\n  useEffect(() => {\n    function handleClick(e) {\n      if (!e.target.classList.contains('form__dropdown-item')) {\n        setIngredientChoiseList([]);\n      }\n    }\n    document.addEventListener('click', handleClick);\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  }, []);\n\n  function handleIngredientDelete(currentIngredient) {\n    const newAddedIngredients = addedIngredients.filter((ingredient) => (\n      (!((ingredient.name === currentIngredient.name) && (ingredient.amount.toString() === currentIngredient.amount.toString())))\n    ));\n    setAddedIngredients(newAddedIngredients);\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n    setDescriptionError(e.target.validationMessage);\n  }\n\n  function handleTagClick(remove, selectedTag) {\n    if (remove) {\n      const newTags = tags.filter((item) => (item !== selectedTag));\n      setTags(newTags);\n    } else {\n      tags.push(selectedTag);\n      setTags(tags);\n    }\n  }\n\n  function handleImageChange(e) {\n    setImage(e.target.value);\n  }\n\n  function handleFormRecipeSubmit(e) {\n    setLoading(true);\n    const formElem = new FormData(formRef.current);\n    e.preventDefault();\n    const recipe = {\n      author: 'admin',\n      name: recipeName,\n      ingredient: addedIngredients,\n      tag: tags,\n      cooking_time: cookingTime,\n      description,\n    };\n    onSubmit(recipe, formElem, localStorage.getItem('token'), recipeId, setLoading);\n  }\n\n  function handlePhotoDelete() {\n    document.getElementById('id_file').value = null;\n    setImage('');\n  }\n\n  function handleDelete() {\n    onDelete(recipeId);\n  }\n\n  useEffect(() => {\n    const disabled = (\n      recipeNameError\n      || cookingTimeError\n      || descriptionError\n      || (\n        !recipeName\n        || !cookingTime\n        || !description\n        || addedIngredients.length === 0\n        || tags.length === 0\n        || (!image && !recipeId)\n      )\n    );\n    if (disabled) {\n      setShowSubmitHint(true);\n    } else {\n      setShowSubmitHint(false);\n    }\n  }, [\n    recipeNameError,\n    cookingTimeError,\n    descriptionError,\n    recipeName,\n    cookingTime,\n    description,\n    addedIngredients,\n    tags,\n    image,\n  ]);\n\n  useEffect(() => {\n    if (recipeId) {\n      api.getRecipe(recipeId)\n        .then((data) => {\n          setRecipeName(data.name);\n          setCookingTime(data.cooking_time);\n          setDescription(data.description);\n          const dataTags = [];\n          data.tag.forEach((tag) => (\n            dataTags.push(tag.name)\n          ));\n          setTags(dataTags);\n          setAddedIngredients(data.ingredient);\n        })\n        .catch((err) => {\n          setResponseError(err);\n          setIsOpenInfoTooltip(true);\n        });\n    }\n  }, [recipeId]);\n\n  return (\n    <>\n      {renderMainHeader(header)}\n      <Form\n        formRef={formRef}\n        onSubmit={handleFormRecipeSubmit}\n      >\n        <div ref={formGroupRef} className=\"form__group\">\n          <span htmlFor=\"id_name\" className=\"form__label\">Название рецепта</span>\n          <div className=\"form__field-group\">\n            <input\n              value={recipeName}\n              onChange={handleRecipeNameChange}\n              type=\"text\"\n              id=\"id_name\"\n              name=\"name\"\n              className=\"form__input\"\n              minLength=\"2\"\n              maxLength=\"50\"\n              required\n            />\n            <span className={cn('form__error', { form__error_active: recipeNameError })}>{recipeNameError}</span>\n          </div>\n        </div>\n\n        <div className=\"form__group\">\n          <p className=\"form__label\">Теги</p>\n          <div className=\"form__field-group\">\n            <Tags\n              selectedTags={tags}\n              onTagClick={handleTagClick}\n            />\n            <span className=\"form__error\" />\n          </div>\n        </div>\n\n        <div className=\"form__group\">\n          <span htmlFor=\"nameIngredient\" className=\"form__label\">Ингредиенты</span>\n          <div className=\"form__field-group\">\n            <div className=\"form__field-group-ingredientes\">\n              <div ref={formDropdownRef} className=\"form__dropdown\">\n                <textarea\n                  onChange={handleNameIngredientChange}\n                  value={nameIngredient}\n                  type=\"text\"\n                  id=\"nameIngredient\"\n                  className=\"form__input\"\n                  maxLength=\"30\"\n                />\n                <FormRecipeDropdownBlock\n                  ingredientList={ingredientChoiseList}\n                  onItemClick={handleItemClick}\n                />\n              </div>\n              <input\n                onChange={handleAmountChange}\n                value={amountUnits}\n                type=\"number\"\n                id=\"cantidad\"\n                className=\"form__input\"\n                min=\"1\"\n                max=\"999\"\n              />\n              <span htmlFor=\"cantidad\" className=\"form__label\" id=\"cantidadVal\">{nameUnits || 'шт.'}</span>\n            </div>\n            <div className=\"form__field-group-ingredientes-container\">\n              {addedIngredients.map((ingredient) => (\n                <div key={`${ingredient.name}__${ingredient.amount}`} className=\"form__field-item-ingredient\">\n                  <span>\n                    {`${ingredient.name} `}\n                    {`${ingredient.amount} `}\n                    {ingredient.units}\n                  </span>\n                  <button type=\"button\" onClick={handleIngredientDelete.bind(this, ingredient)} className=\"form__field-item-delete form__field-item-delete_ingredient\" />\n                </div>\n              ))}\n            </div>\n            <button onClick={handleAddIngredient} type=\"button\" className=\"form__ingredient-add-btn\" id=\"addIng\">Добавить ингредиент</button>\n            <span className=\"form__error\" />\n          </div>\n        </div>\n\n        <div className=\"form__group\">\n          <span htmlFor=\"id_time\" className=\"form__label\">Время приготовления</span>\n          <div className=\"form__field-group form__field-group_time\">\n            <input\n              type=\"number\"\n              id=\"id_time\"\n              name=\"cooking_time\"\n              className=\"form__input\"\n              min=\"0\"\n              maxLength=\"3\"\n              value={cookingTime}\n              onChange={handkeCookingTimeChange}\n              required\n            />\n            <span htmlFor=\"id_time\" className=\"form__label\">минут</span>\n            <span className={cn('form__error', { form__error_active: cookingTimeError })}>{cookingTimeError}</span>\n          </div>\n        </div>\n\n        <div className=\"form__group\">\n          <span htmlFor=\"id_description\" className=\"form__label\">Описание</span>\n          <div className=\"form__field-group\">\n            <textarea\n              name=\"description\"\n              id=\"id_description\"\n              rows=\"8\"\n              className=\"form__textarea\"\n              value={description}\n              onChange={handleDescriptionChange}\n              minLength=\"2\"\n              maxLength=\"500\"\n              required\n            />\n            <span className={cn('form__error', { form__error_active: descriptionError })}>{descriptionError}</span>\n          </div>\n        </div>\n\n        <div className=\"form__group\">\n          <span className=\"form__label\">{`Загрузить${recipeId ? ' новое' : ''} фото`}</span>\n          <div className=\"form__field-group form__field-group_photo\">\n            <label htmlFor=\"id_file\" className=\"form__photo-file\">\n              {recipeId ? (\n                <input\n                  vaule={image}\n                  onChange={handleImageChange}\n                  type=\"file\"\n                  name=\"image\"\n                  id=\"id_file\"\n                  className=\"form__photo-input\"\n                />\n              ) : (\n                <input\n                  vaule={image}\n                  onChange={handleImageChange}\n                  type=\"file\"\n                  name=\"image\"\n                  id=\"id_file\"\n                  className=\"form__photo-input\"\n                  required\n                />\n              )}\n            </label>\n            {image && <button type=\"button\" onClick={handlePhotoDelete} className=\"form__field-item-delete\" />}\n            <span className=\"form__error\" />\n          </div>\n        </div>\n        <span className={cn('form__error form__error_server', { form__error_server_active: serverError })}>{serverError}</span>\n        {/* {showSubmitHint && <div></div>} */}\n        <div className=\"form__footer form__footer_recipe\">\n          <div className=\"form__hint-container\">\n            {showSubmitHint\n              && (\n                <div className=\"form__hint\">\n                  Необходимо:\n                  {!recipeName && (\n                    <>\n                      <br />\n                      <span> - Указать название рецепта</span>\n                    </>\n                  )}\n                  {tags.length === 0 && (\n                    <>\n                      <br />\n                      <span> - Хотя бы один тег (завтрак, обед или ужин)</span>\n                    </>\n                  )}\n                  {addedIngredients.length === 0 && (\n                    <>\n                      <br />\n                      <span> - Добавить хотя бы один ингредиент в список</span>\n                    </>\n                  )}\n                  {!cookingTime && (\n                    <>\n                      <br />\n                      <span> - Указать время приготовления</span>\n                    </>\n                  )}\n                  {!description && (\n                    <>\n                      <br />\n                      <span> - Добавить описание</span>\n                    </>\n                  )}\n                  {(!image && !recipeId) && (\n                    <>\n                      <br />\n                      <span> - Добавить фотографию</span>\n                    </>\n                  )}\n                  {((recipeNameError || cookingTimeError || descriptionError)) && (\n                    <>\n                      <br />\n                      <span> - Убедиться, что нет ошибок заполнения</span>\n                    </>\n                  )}\n                </div>\n              )}\n            <SubmitButton\n              blue\n              text={recipeId ? 'Сохранить' : 'Создать рецепт'}\n              disabled={\n                loading\n                || recipeNameError\n                || cookingTimeError\n                || descriptionError\n                || (\n                  !recipeName\n                  || !cookingTime\n                  || !description\n                  || addedIngredients.length === 0\n                  || tags.length === 0\n                  || (!image && !recipeId)\n                )\n              }\n              loading={loading}\n            />\n\n          </div>\n          {recipeId && (\n            <Button\n              text=\"Удалить\"\n              underline\n              onClick={handleDelete}\n            />\n          )}\n        </div>\n\n      </Form>\n    </>\n  );\n}\n\nexport default FormRecipe;\n","import React, { useRef } from 'react';\nimport './Favorite.css';\nimport CardList from '../CardList/CardList';\nimport Card from '../Card/Card';\nimport Pagination from '../Pagination/Pagination';\n\nfunction Favorite({\n  onAddToFavorites,\n  onDeleteFromFavorites,\n  onAddPurchase,\n  favoritesPagination,\n  recipes,\n  getFavoritesRecipes,\n  header,\n  renderMainHeader,\n  onDeletePurchase,\n  purchases,\n}) {\n  const favoriteRecipesRef = useRef();\n  return (\n    <>\n      {renderMainHeader(header)}\n      <div ref={favoriteRecipesRef}>\n        <CardList>\n          {recipes.map((recipe) => (\n            <Card\n              key={`card__${recipe.id}`}\n              favoriteRecipesPage\n              subscribers={recipe.subscribers}\n              recipeId={recipe.id}\n              recipeName={recipe.name}\n              tags={recipe.tag}\n              cookingTime={recipe.cooking_time}\n              image={recipe.image_url}\n              author={recipe.author}\n              onAddToFavorites={onAddToFavorites}\n              onDeleteFromFavorites={onDeleteFromFavorites}\n              onAddPurchase={onAddPurchase}\n              pagination={favoritesPagination}\n              onDeletePurchase={onDeletePurchase}\n              purchases={purchases}\n            />\n          ))}\n        </CardList>\n      </div>\n      <Pagination\n        pagination={favoritesPagination}\n        getItems={getFavoritesRecipes}\n        containerWithLoadableItemsRef={favoriteRecipesRef}\n      />\n    </>\n  );\n}\n\nexport default Favorite;\n","import React, { useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport './ShopListItem.css';\nimport '../appearAnimation/appearAnimation.css';\nimport testCardImg from '../../images/testCardImg.png';\n\nfunction ShopListItem({\n  recipe,\n  onDeletePurchase,\n  purchaseId,\n}) {\n  const shopItemRef = useRef();\n  function handlePurchaseDelete() {\n    const promise = new Promise((resolve) => {\n      if (shopItemRef.current) {\n        shopItemRef.current.classList.add('disappearAnimation');\n      }\n      setTimeout(() => (\n        resolve('done')\n      ), 100);\n    });\n    promise.then(() => {\n      onDeletePurchase(purchaseId);\n    });\n  }\n\n  return (\n    <li key={purchaseId} ref={shopItemRef} className=\"shopping-list__item\" data-id=\"111\">\n      <div className=\"recipe recipe_reverse\">\n        <Link to={`/single-page/${recipe.id}`} className=\"recipe__image-link link\">\n          <img src={testCardImg} alt={recipe.name} className=\"recipe__image recipe__image_big\" />\n        </Link>\n        <Link to={`/single-page/${recipe.id}`} className=\"recipe__title-link link\">\n          <h3 className=\"recipe__title\">{recipe.name}</h3>\n        </Link>\n        <p className=\"recipe__text\">\n          <span className=\"icon-time\" />\n          {` ${recipe.cooking_time} мин.`}\n        </p>\n      </div>\n      <button onClick={handlePurchaseDelete} type=\"button\" className=\"shopping-list__button link\">Удалить</button>\n    </li>\n  );\n}\n\nexport default React.memo(ShopListItem);\n","import React from 'react';\nimport './ShopList.css';\nimport CardList from '../CardList/CardList';\nimport ShopListItem from '../ShopListItem/ShopListItem';\nimport Button from '../Button/Button';\n\nfunction ShopList({\n  // purchasesRecipes,\n  purchases,\n  onDeletePurchase,\n  onDownload,\n  header,\n  renderMainHeader,\n}) {\n  function handleDownload() {\n    onDownload(purchases);\n  }\n\n  return (\n    <>\n      {renderMainHeader(header)}\n      <CardList column>\n        <ul className=\"shopping-list\">\n          {purchases.map((purchaseData) => (\n            <ShopListItem\n              key={purchaseData.id}\n              recipe={purchaseData.purchase}\n              purchaseId={purchaseData.id}\n              onDeletePurchase={onDeletePurchase}\n            />\n          ))}\n        </ul>\n\n        <Button\n          blue\n          text=\"Скачать список\"\n          onClick={handleDownload}\n          disabled={purchases.length < 1}\n        />\n\n      </CardList>\n    </>\n  );\n}\n\nexport default React.memo(ShopList);\n","import React from 'react';\nimport './iconTime.css';\n\nfunction IconTime() {\n  return (\n    <span className=\"icon-time\" />\n  );\n}\n\nexport default IconTime;\n","import React from 'react';\nimport './iconUser.css';\n\nfunction IconUser() {\n  return (\n    <span className=\"icon-user\" />\n  );\n}\n\nexport default IconUser;\n","import React, { useEffect, useState, useContext } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport './SingleRecipePage.css';\nimport testCardImg from '../../images/testCardImg.png';\nimport api from '../../utils/Api';\nimport renderTags from '../../utils/renderTags';\nimport CurrentUserContext from '../../context/CurrentUserContext';\nimport IconFavorite from '../../ui/iconFavorite/iconFavorite';\nimport Button from '../Button/Button';\nimport IconPlus from '../../ui/iconPlus/iconPlus';\nimport IconMinus from '../../ui/iconMinus/iconMinus';\nimport IconTime from '../../ui/iconTime/iconTime';\nimport IconUser from '../../ui/iconUser/iconUser';\n\nfunction SingleRecipePage({\n  onSubscribe,\n  subscriptions,\n  onUnsubscribe,\n  onAddToFavorites,\n  onDeleteFromFavorites,\n  onAddPurchase,\n  onDeletePurchase,\n  purchases,\n  setResponseError,\n  setIsOpenInfoTooltip,\n}) {\n  const { recipeId } = useParams();\n  const [recipe, setRecipe] = useState({});\n  const [isUserIsSubscribed, setIsUserIsSubscribed] = useState(null);\n  const currentUser = useContext(CurrentUserContext);\n  const [isCardFavorite, setIsCardFavorite] = useState(false);\n  const [purchaseId, setPurchaseId] = useState('');\n\n  function getRecipeData(id) {\n    api.getRecipe(id)\n      .then((data) => {\n        setRecipe(data);\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleAddToPurchase() {\n    onAddPurchase(recipeId);\n  }\n\n  function handleAddToFavorites() {\n    onAddToFavorites(recipeId);\n    getRecipeData(recipeId);\n  }\n\n  function handleRemoveFromFavorites() {\n    onDeleteFromFavorites(recipeId);\n    getRecipeData(recipeId);\n  }\n\n  function handleSubscribe() {\n    onSubscribe(recipe.author, setIsUserIsSubscribed);\n  }\n\n  function handlePurchaseDelete() {\n    onDeletePurchase(purchaseId);\n  }\n\n  function handleUnSubscribe() {\n    api.getSubscriptions({ author: `&author=${recipe.author}` })\n      .then((data) => {\n        if (data.results) {\n          onUnsubscribe({\n            subscriptionId: data.results[0].id,\n            setIsUserIsSubscribed,\n          });\n        }\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  useEffect(() => {\n    getRecipeData(recipeId);\n  }, [recipeId]);\n\n  useEffect(() => {\n    if (purchases) {\n      if (purchases.length === 0) {\n        setPurchaseId('');\n      } else {\n        const purchase = purchases.find((item) => (\n          item.purchase.id.toString() === recipeId.toString()\n        ));\n        if (purchase) {\n          setPurchaseId(purchase.id);\n        } else {\n          setPurchaseId('');\n        }\n      }\n    }\n  }, [purchases, recipeId]);\n\n  useEffect(() => {\n    if (currentUser.name) {\n      if (recipe.subscribers) {\n        const isSaved = recipe.subscribers.some((item) => (\n          item.username === currentUser.username\n        ));\n        setIsCardFavorite(isSaved);\n      }\n    }\n  }, [recipe, currentUser.username]);\n\n  useEffect(() => {\n    if (currentUser.name) {\n      api.getSubscriptions({ author: `&author=${recipe.author}` })\n        .then((data) => {\n          if (data.results) setIsUserIsSubscribed(data.results.length > 0);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [currentUser, subscriptions, recipe.author]);\n\n  function renderIngredients(ingredients) {\n    if (ingredients) {\n      return ingredients.map((ingredient) => (\n        <p className=\" single-card__section-item\" key={ingredient.id}>\n          {`${ingredient.name} - ${ingredient.amount} ${ingredient.units}.`}\n        </p>\n      ));\n    }\n    return <p className=\" single-card__section-item\">загрузка</p>;\n  }\n\n  function renderSubscribeButton() {\n    if (currentUser.name && currentUser.name !== recipe.author) {\n      if (isUserIsSubscribed === null) {\n        return (\n          <li className=\"single-card__item\">\n            <Button\n              text=\"Загрузка...\"\n              type=\"button\"\n              lightBlue\n              sizeSubscribe\n              disabled\n            />\n          </li>\n        );\n      }\n      if (isUserIsSubscribed) {\n        return (\n          <li className=\"single-card__item\">\n            <Button\n              text=\"Отписаться\"\n              lightBlue\n              sizeSubscribe\n              onClick={handleUnSubscribe}\n            />\n          </li>\n        );\n      }\n      return (\n        <li className=\"single-card__item\">\n          <Button\n            text=\"Подписаться на автора\"\n            onClick={handleSubscribe}\n            lightBlue\n            sizeSubscribe\n          />\n        </li>\n      );\n    }\n    return <li className=\"single-card__item\"><div className=\"button_size_subscribe\" /></li>;\n  }\n\n  return (\n    <div className=\"single-card\" data-id={`recipe__${recipeId}`} data-author={recipe.author}>\n      <img src={testCardImg} alt={recipe.name} className=\"single-card__image\" />\n      <div className=\"single-card__info\">\n        <div className=\"single-card__header-info\">\n          <h1 className=\"single-card__title\">{recipe.name}</h1>\n          <div className=\"single-card__favorite\">\n            <Button\n              onClick={isCardFavorite ? handleRemoveFromFavorites : handleAddToFavorites}\n              styleNone\n              text={(\n                <IconFavorite\n                  big\n                  active={isCardFavorite}\n                />\n              )}\n            />\n            <div className=\"single-card__favorite-tooltip tooltip\">Добавить в избранное</div>\n          </div>\n        </div>\n        <ul className=\"single-card__items\">\n          {renderTags(recipe.tag)}\n        </ul>\n        <div className=\"single-card__items single-card__items_column\">\n          <p className=\"single-card__text\">\n            <IconTime />\n            {` ${recipe.cooking_time} мин.`}\n          </p>\n          <ul className=\"single-card__items\">\n            <li className=\"single-card__item\">\n              <Link to={`/recipes/${recipe.author}`} className=\"single-card__name-link\">\n                <IconUser />\n                {` ${recipe.author}`}\n              </Link>\n            </li>\n            <li className=\"single-card__item\">\n              {recipe.author === currentUser.name && (\n                <Link type=\"button\" to={`/form-recipe/${recipeId}`} className=\"single-card__button\">\n                  Редактировать рецепт\n                </Link>\n              )}\n            </li>\n          </ul>\n        </div>\n        <ul className=\"single-card__items\">\n          <li className=\"single-card__item\">\n            {purchaseId ? (\n              <Button\n                text={(\n                  <>\n                    <IconMinus />\n                    Убрать из покупок\n                  </>\n                )}\n                onClick={handlePurchaseDelete}\n                lightOrange\n                disabled={!currentUser.name}\n              />\n            ) : (\n              <Button\n                text={(\n                  <>\n                    <IconPlus />\n                    Добавить в покупки\n                  </>\n                )}\n                onClick={handleAddToPurchase}\n                blue\n                disabled={!currentUser.name}\n              />\n            )}\n          </li>\n          {renderSubscribeButton()}\n        </ul>\n        <div className=\"single-card__section\">\n          <h3 className=\"single-card__section-title\">Ингридиенты:</h3>\n          <div className=\"single-card__items single-card__items_column\">\n            {renderIngredients(recipe.ingredient)}\n          </div>\n        </div>\n        <div className=\"single-card__section\">\n          <h3 className=\"single-card__section-title\">Описание:</h3>\n          <p className=\" single-card__section-text\">{recipe.description}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default SingleRecipePage;\n","import React from 'react';\nimport { Route, useHistory } from 'react-router-dom';\n\nconst ProtectedRout = ({ component: Component, ...props }) => {\n  const { path } = props;\n  const history = useHistory();\n\n  return (\n    <Route exact path={path}>\n      {\n        // eslint-disable-next-line\n        () => (localStorage.getItem('token') ? <Component {...props} /> : history.push('/', {noAuthRedirect: true}))\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRout;\n","import React from 'react';\nimport './Popup.css';\n\nfunction Popup({\n  isOpen,\n  title,\n  onClose,\n  message,\n}) {\n  function overlayClose(evt) {\n    if (\n      evt.target.classList.contains('popup__close')\n      || evt.target.classList.contains('popup_opened')\n    ) {\n      onClose();\n    }\n  }\n\n  return (\n    <div onMouseDown={overlayClose} className={`popup ${isOpen && 'popup_opened'}`}>\n      <div className={`popup__window ${isOpen && 'popup__window_opened'}`}>\n        <h3 className=\"popup__title\">{title}</h3>\n        <p className=\"popup__server-error popup__server-error_active\">{message}</p>\n        <button type=\"button\" onClick={onClose} className=\"popup__close\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Popup;\n","import React from 'react';\nimport './InfoTooltip.css';\nimport Popup from '../Popup/Popup';\n\nfunction InfoTooltip({\n  isOpen,\n  onClose,\n  responseError,\n  setResponseError,\n}) {\n  function handleClose() {\n    onClose();\n    setTimeout(() => {\n      setResponseError('');\n    }, 400);\n  }\n\n  return (\n    <Popup\n      isOpen={isOpen}\n      title=\"Ошибка!\"\n      message={responseError}\n      onClose={handleClose}\n    />\n  );\n}\n\nexport default InfoTooltip;\n","import { API_BASE_URL } from './constants';\n\nclass Auth {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.headers = options.headers;\n  }\n\n  async register(name, username, email, password) {\n    const loadingRegisterInfo = fetch(`${this.baseUrl}/users/signup/`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        first_name: name,\n        username,\n        email,\n        password,\n      }),\n    });\n    const response = await loadingRegisterInfo;\n    const newUserRegistrationData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(newUserRegistrationData).forEach((key) => {\n        errors.push(`${key}: ${newUserRegistrationData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(newUserRegistrationData);\n    });\n  }\n\n  async authorize(username, password) {\n    const loadingAuthorizeInfo = fetch(`${this.baseUrl}/users/signin/`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({ username, password }),\n    });\n    const response = await loadingAuthorizeInfo;\n    const authorizeData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(authorizeData).forEach((key) => {\n        errors.push(`${key}: ${authorizeData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(authorizeData);\n    });\n  }\n\n  async changePassword(oldPassword, newPassword, newPasswordAgain) {\n    const loadingPasswordChangeInfo = fetch(`${this.baseUrl}/users/change-password/`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        old_password: oldPassword,\n        new_password: newPassword,\n        new_password_again: newPasswordAgain,\n      }),\n    });\n    const response = await loadingPasswordChangeInfo;\n    const changingPasswordData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(changingPasswordData).forEach((key) => {\n        errors.push(`${key}: ${changingPasswordData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(changingPasswordData);\n    });\n  }\n\n  async getContent(token) {\n    const contentInfo = fetch(`${this.baseUrl}/users/me/`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: `Token ${token}`,\n      },\n    });\n    const response = await contentInfo;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n\n  async resetPassword(email) {\n    const loadingResponse = fetch(`${this.baseUrl}/users/reset-password/`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({ email }),\n    });\n    const response = await loadingResponse;\n    const responseData = await response.json();\n    if (!response.ok) {\n      const errors = [];\n      Object.keys(responseData).forEach((key) => {\n        errors.push(`${key}: ${responseData[key]}`);\n      });\n      return Promise.reject(`Ошибка! ${errors.join('\\n')}`);\n    }\n    return new Promise((resolve) => {\n      resolve(responseData);\n    });\n  }\n}\n\nconst auth = new Auth({\n  baseUrl: API_BASE_URL,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default auth;\n","import React, { useState, useEffect } from 'react';\n\nimport {\n  Route,\n  Switch,\n  Redirect,\n  useHistory,\n} from 'react-router-dom';\n\nimport './App.css';\nimport '../appearAnimation/appearAnimation.css';\nimport Header from '../Header/Header';\nimport Footer from '../Footer/Footer';\nimport Tags from '../Tags/Tags';\nimport Recipes from '../Recipes/Recipes';\nimport FormReg from '../FromReg/FormReg';\nimport FormAuth from '../FormAuth/FormAuth';\nimport FormResetPassword from '../FormResetPassword/FormResetPassword';\nimport FormChangePassword from '../FormChangePassword/FormChangePassword';\nimport MyFollow from '../MyFollow/MyFollow';\nimport FormRecipe from '../FormRecipe/FormRecipe';\nimport Favorite from '../Favorite/Favorite';\nimport ShopList from '../ShopList/ShopList';\nimport SingleRecipePage from '../SingleRecipePage/SingleRecipePage';\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\nimport InfoTooltip from '../InfoTooltip/InfoTooltip';\n\nimport api from '../../utils/Api';\nimport auth from '../../utils/Auth';\n\nimport CurrentUserContext from '../../context/CurrentUserContext';\nimport downloadAsFile from '../../utils/downloadFile';\n\nfunction App() {\n  const history = useHistory();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [recipes, setRecipes] = useState([]);\n  const [authorRecipes, setAuthorRecipes] = useState([]);\n  const [authorRecipesPagination, setAuthorRecipesPagination] = useState({});\n  const [selectedAuthor, setSelectedAuthor] = useState('');\n  const [resetPasswordResponse, setResetPasswordResponse] = useState('');\n  const [recipesPagination, setRecipesPagination] = useState({});\n  const [favoritesPagination, setFavoritesPagination] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [favoriteRecipes, setFavoriteRecipes] = useState([]);\n  const [serverError, setServerError] = useState('');\n  const [subscriptions, setSubscriptions] = useState([]);\n  const [subscriptionsPagination, setSubscriptionsPagination] = useState({});\n  const [purchases, setPurchases] = useState([]);\n\n  const [tagBreakfast, setTagBreakfast] = useState('');\n  const [tagDinner, setTagDinner] = useState('');\n  const [tagSupper, setTagSupper] = useState('');\n\n  const [isOpenInfoTooltip, setIsOpenInfoTooltip] = useState(false);\n  const [responseError, setResponseError] = useState('');\n\n  function closeAllPopups() {\n    setIsOpenInfoTooltip(false);\n  }\n\n  useEffect(() => {\n    function handleEscClose(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keydown', handleEscClose);\n    return () => {\n      document.removeEventListener('keydown', handleEscClose);\n    };\n  }, []);\n\n  // Users\n  function tokenCheck() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((user) => {\n          if (user) {\n            api.headers.Authorization = `Token ${token}`;\n            auth.headers.Authorization = `Token ${token}`;\n            setCurrentUser({\n              name: user.first_name,\n              username: user.username,\n              email: user.email,\n            });\n            setServerError('');\n            setIsLoggedIn(true);\n          }\n        })\n        .catch((err) => {\n          localStorage.removeItem('jwt');\n          setCurrentUser({});\n          setIsLoggedIn(false);\n          history.push('/signin');\n          // setResponseError(err);\n          // setIsOpenInfoTooltip(true);\n          console.log(err);\n        });\n    } else {\n      localStorage.removeItem('jwt');\n      setCurrentUser({});\n      setIsLoggedIn(false);\n    }\n  }\n\n  useEffect(() => {\n    setIsLoggedIn(false);\n    tokenCheck();\n  }, []);\n\n  function handleRegistrationSubmit(name, username, email, password, setLoading) {\n    auth.register(name, username, email, password)\n      .then((newUserInfo) => {\n        if (newUserInfo.token) {\n          localStorage.setItem('token', newUserInfo.token);\n          api.headers.Authorization = `Token ${newUserInfo.token}`;\n          auth.headers.Authorization = `Token ${newUserInfo.token}`;\n          setCurrentUser({\n            name: newUserInfo.first_name,\n            username: newUserInfo.username,\n            email: newUserInfo.email,\n          });\n          setIsLoggedIn(true);\n          setServerError('');\n          history.push('/');\n        }\n      })\n      .catch((err) => {\n        setServerError(err);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }\n\n  function handleLoginSubmit(username, password, setLoading) {\n    auth.authorize(username, password)\n      .then((data) => {\n        if (data.token) {\n          auth.getContent(data.token)\n            .then((user) => {\n              localStorage.setItem('token', data.token);\n              api.headers.Authorization = `Token ${data.token}`;\n              auth.headers.Authorization = `Token ${data.token}`;\n              setCurrentUser({\n                name: user.first_name,\n                username: user.username,\n                email: user.email,\n              });\n              setIsLoggedIn(true);\n              setServerError('');\n              history.push('/');\n            });\n        }\n      })\n      .catch((e) => {\n        setServerError(e);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }\n\n  function handlePasswordChange(oldPassword, newPassword, newPasswordAgain, setLoading) {\n    auth.changePassword(oldPassword, newPassword, newPasswordAgain)\n      .then(() => {\n        localStorage.removeItem('token');\n        setIsLoggedIn(false);\n        setCurrentUser({});\n        setServerError('');\n        history.push('/signin');\n      })\n      .catch((err) => {\n        setServerError(err);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }\n\n  function handlePasswordReset(email, setLoading) {\n    auth.resetPassword(email)\n      .then((data) => {\n        setResetPasswordResponse(data);\n        setServerError('');\n      })\n      .catch((err) => {\n        setServerError(err);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }\n\n  function handleExit() {\n    localStorage.removeItem('token');\n    setCurrentUser({});\n    setIsLoggedIn(false);\n    history.push('/signin');\n  }\n  // End users\n\n  // Recipes\n\n  function getRecipes(params) {\n    const {\n      page,\n      author,\n      loadedElementsContainer,\n    } = params;\n    api.getRecipes({\n      page,\n      author,\n      tagBreakfast,\n      tagDinner,\n      tagSupper,\n    })\n      .then((data) => {\n        console.log(data);\n        if (author) {\n          setAuthorRecipes(data.results);\n          setAuthorRecipesPagination({\n            count: data.count,\n            next: data.next,\n            previous: data.previous,\n          });\n        } else {\n          setRecipes(data.results);\n          setRecipesPagination({\n            count: data.count,\n            next: data.next,\n            previous: data.previous,\n          });\n        }\n        if (loadedElementsContainer) {\n          loadedElementsContainer.classList.remove('disappearAnimation');\n          loadedElementsContainer.classList.add('appearAnimation');\n        }\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleDeleteRecipe(recipeId) {\n    api.deleteRecipe(recipeId)\n      .then(() => {\n        window.location.assign('/');\n        setServerError('');\n      })\n      .catch((err) => {\n        setServerError(err);\n      });\n  }\n\n  function handleRecipeSubmit(recipe, formElem, token) {\n    formElem.append('ingredient', JSON.stringify(recipe.ingredient));\n    formElem.append('tag', JSON.stringify(recipe.tag));\n    api.postRecipe(recipe, formElem, token)\n      .then(() => {\n        setServerError('');\n        window.location.assign('/');\n      })\n      .catch((err) => {\n        setServerError(err);\n      });\n  }\n\n  function handleRecipeUpdate(recipe, formElem, token, recipeId, setLoading) {\n    formElem.append('ingredient', JSON.stringify(recipe.ingredient));\n    formElem.append('tag', JSON.stringify(recipe.tag));\n    api.updateRecipe(formElem, token, recipeId)\n      .then(() => {\n        setServerError('');\n        window.location.assign('/');\n      })\n      .catch((err) => {\n        setServerError(err);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }\n\n  function getSubscriptions(params) {\n    const { page, loadedElementsContainer } = params;\n    api.getSubscriptions({ page })\n      .then((subscriptionsData) => {\n        setSubscriptions(subscriptionsData.results);\n        setSubscriptionsPagination({\n          count: subscriptionsData.count,\n          next: subscriptionsData.next,\n          previous: subscriptionsData.previous,\n        });\n        if (loadedElementsContainer) {\n          loadedElementsContainer.classList.remove('disappearAnimation');\n          loadedElementsContainer.classList.add('appearAnimation');\n        }\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleSubscribe(author, setIsUserisSubscribed) {\n    api.subscribe(author)\n      .then(() => {\n        setIsUserisSubscribed(true);\n        getSubscriptions({});\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleUnsubscribe(params) {\n    const { subscriptionId, setIsUserisSubscribed, page } = params;\n    api.unsubscribe(subscriptionId)\n      .then(() => {\n        getSubscriptions({ page });\n        if (setIsUserisSubscribed) {\n          setIsUserisSubscribed(false);\n        }\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function getFavoritesRecipes(params) {\n    const {\n      page,\n      loadedElementsContainer,\n    } = params;\n    api.getFavoritesRecipes({\n      page,\n      tagBreakfast,\n      tagDinner,\n      tagSupper,\n    })\n      .then((favorites) => {\n        const favoriteRiceps = [];\n        favorites.results.forEach((item) => (\n          favoriteRiceps.push(item.favorite)\n        ));\n        setFavoriteRecipes(favorites.results);\n        setFavoritesPagination({\n          count: favorites.count,\n          next: favorites.next,\n          previous: favorites.previous,\n        });\n        if (loadedElementsContainer) {\n          loadedElementsContainer.classList.remove('disappearAnimation');\n          loadedElementsContainer.classList.add('appearAnimation');\n        }\n      });\n  }\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      getFavoritesRecipes({});\n    }\n  }, [isLoggedIn]);\n\n  function getPurchases() {\n    api.getPurchases()\n      .then((purchasesData) => {\n        setPurchases(purchasesData);\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      getPurchases();\n    }\n  }, [isLoggedIn]);\n\n  function handleAuthorClick(authorName) {\n    getRecipes({ author: authorName });\n  }\n\n  function handleSetTagBreakfast() {\n    setTagBreakfast(tagBreakfast ? '' : '&tag__name=завтрак');\n  }\n\n  function handleSetTagDinner() {\n    setTagDinner(tagDinner ? '' : '&tag__name=обед');\n  }\n\n  function handleSetTagSupper() {\n    setTagSupper(tagSupper ? '' : '&tag__name=ужин');\n  }\n\n  useEffect(() => {\n    // запрашиваем отвильтрованные по тегам рецепты,\n    // как для конкретного автора, так и для страницы со всеми рецептами и сохраненные рецепты\n    // тогда установленный фильтр работает по всем страницам и выделенные теги актуальны\n    if (selectedAuthor) {\n      getRecipes({ author: selectedAuthor });\n    }\n    getRecipes({});\n    if (isLoggedIn) {\n      getFavoritesRecipes({});\n    }\n  }, [tagBreakfast, tagDinner, tagSupper]);\n\n  function handleAddToPurchase(recipeId) {\n    api.addPurchase(recipeId)\n      .then(() => {\n        getPurchases();\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleDeletePurchase(purchaseId) {\n    api.deletePurchase(purchaseId)\n      .then(() => {\n        getPurchases();\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleAddToFavorites(recipeId, page, author, allRecipesPage, favoriteRecipesPage) {\n    api.addToFavoritesRecipes(recipeId)\n      .then(() => {\n        getRecipes(allRecipesPage ? { page, author } : {});\n        getFavoritesRecipes(favoriteRecipesPage ? { page } : {});\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function handleRemoveFromFavorites(recipeId, page, author, allRecipesPage, favoriteRecipesPage) {\n    api.deleteFromFavoritesRecipes(recipeId)\n      .then(() => {\n        getRecipes(allRecipesPage ? { page, author } : {});\n        getFavoritesRecipes(favoriteRecipesPage ? { page } : {});\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  useEffect(() => {\n    if (selectedAuthor) {\n      getRecipes({ author: selectedAuthor });\n    } else {\n      getRecipes({});\n    }\n  }, [isLoggedIn, selectedAuthor]);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      getSubscriptions({});\n    }\n  }, [isLoggedIn]);\n\n  function handleDownloadClick(downloadPurchases) {\n    api.download(downloadPurchases)\n      .then((response) => {\n        downloadAsFile(response);\n      })\n      .catch((err) => {\n        setResponseError(err);\n        setIsOpenInfoTooltip(true);\n      });\n  }\n\n  function renderTitleName(currentAuthor) {\n    return ` ${currentAuthor.replace('&author__username=', '')}`;\n  }\n\n  function renderMainHeader(header, currentAuthor) {\n    return (\n      <div className=\"main__header appearAnimation\">\n        <h1 className=\"main__title\">\n          {currentAuthor ? renderTitleName(currentAuthor) : header}\n        </h1>\n        {(['Рецепты', 'Избранное'].includes(header)) && (\n          <Tags\n            main\n            onSetTagBreakfast={handleSetTagBreakfast}\n            onSetTagTagDinner={handleSetTagDinner}\n            onSetTagTagSupper={handleSetTagSupper}\n            tagBreakfast={tagBreakfast}\n            tagDinner={tagDinner}\n            tagSupper={tagSupper}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header\n          isLoggedIn={isLoggedIn}\n          onExit={handleExit}\n          purchases={purchases}\n        />\n        <main className=\"container main\">\n\n          <Switch>\n\n            <Route exact path=\"/\">\n              {renderMainHeader('Рецепты')}\n              <Recipes\n                recipes={recipes}\n                favoriteRecipes={favoriteRecipes}\n                onAddToFavorites={handleAddToFavorites}\n                onDeleteFromFavorites={handleRemoveFromFavorites}\n                onAddPurchase={handleAddToPurchase}\n                recipesPagination={recipesPagination}\n                getRecipes={getRecipes}\n                onAuthorClick={handleAuthorClick}\n                setSelectedAuthor={setSelectedAuthor}\n                onDeletePurchase={handleDeletePurchase}\n                purchases={purchases}\n                setResponseError={setResponseError}\n                setIsOpenInfoTooltip={setIsOpenInfoTooltip}\n              />\n            </Route>\n\n            <Route path=\"/signup\">\n              {renderMainHeader('Регистрация')}\n              <FormReg\n                onSubmit={handleRegistrationSubmit}\n                serverError={serverError}\n              />\n            </Route>\n\n            <Route path=\"/signin\">\n              {renderMainHeader('Войти на сайт')}\n              <FormAuth\n                onSubmit={handleLoginSubmit}\n                serverError={serverError}\n              />\n            </Route>\n\n            <Route path=\"/reset-password\">\n              {renderMainHeader('Сброс пароля')}\n              <FormResetPassword\n                onSubmit={handlePasswordReset}\n                serverError={serverError}\n                resetPasswordResponse={resetPasswordResponse}\n                setServerError={setServerError}\n                setResetPasswordResponse={setResetPasswordResponse}\n              />\n            </Route>\n\n            <Route path=\"/change-password\">\n              {renderMainHeader('Изменить пароль')}\n              <FormChangePassword\n                onSubmit={handlePasswordChange}\n                serverError={serverError}\n              />\n            </Route>\n\n            <ProtectedRoute\n              path=\"/my-follow\"\n              header=\"Мои подписки\"\n              renderMainHeader={renderMainHeader}\n              component={MyFollow}\n              onUnsubscribe={handleUnsubscribe}\n              subscriptions={subscriptions}\n              getSubscriptions={getSubscriptions}\n              subscriptionsPagination={subscriptionsPagination}\n              setResponseError={setResponseError}\n              setIsOpenInfoTooltip={setIsOpenInfoTooltip}\n            />\n\n            <ProtectedRoute\n              path=\"/form-recipe/:recipeId\"\n              header=\"Редактирование рецепта\"\n              renderMainHeader={renderMainHeader}\n              component={FormRecipe}\n              onSubmit={handleRecipeUpdate}\n              serverError={serverError}\n              onDelete={handleDeleteRecipe}\n            />\n\n            <ProtectedRoute\n              path=\"/form-recipe/\"\n              header=\"Создание рецепта\"\n              renderMainHeader={renderMainHeader}\n              component={FormRecipe}\n              onSubmit={handleRecipeSubmit}\n              serverError={serverError}\n              setResponseError={setResponseError}\n              setIsOpenInfoTooltip={setIsOpenInfoTooltip}\n            />\n\n            <ProtectedRoute\n              path=\"/favorite/\"\n              header=\"Избранное\"\n              renderMainHeader={renderMainHeader}\n              component={Favorite}\n              onAddToFavorites={handleAddToFavorites}\n              onDeleteFromFavorites={handleRemoveFromFavorites}\n              onAddPurchase={handleAddToPurchase}\n              favoritesPagination={favoritesPagination}\n              recipes={favoriteRecipes}\n              getFavoritesRecipes={getFavoritesRecipes}\n              onDeletePurchase={handleDeletePurchase}\n              purchases={purchases}\n            />\n\n            <ProtectedRoute\n              path=\"/shop-list\"\n              header=\"Список покупок\"\n              renderMainHeader={renderMainHeader}\n              component={ShopList}\n              purchases={purchases}\n              onDeletePurchase={handleDeletePurchase}\n              onDownload={handleDownloadClick}\n            />\n\n            <Route path=\"/single-page/:recipeId\">\n              <SingleRecipePage\n                onSubscribe={handleSubscribe}\n                onUnsubscribe={handleUnsubscribe}\n                subscriptions={subscriptions}\n                onAddToFavorites={handleAddToFavorites}\n                onDeleteFromFavorites={handleRemoveFromFavorites}\n                onAddPurchase={handleAddToPurchase}\n                favoriteRecipes={favoriteRecipes}\n                onDeletePurchase={handleDeletePurchase}\n                purchases={purchases}\n                setResponseError={setResponseError}\n                setIsOpenInfoTooltip={setIsOpenInfoTooltip}\n              />\n            </Route>\n\n            <Route path=\"/recipes/:author\">\n              {renderMainHeader('Рецепты', selectedAuthor)}\n              <Recipes\n                recipes={authorRecipes}\n                favoriteRecipes={favoriteRecipes}\n                onAddToFavorites={handleAddToFavorites}\n                onDeleteFromFavorites={handleRemoveFromFavorites}\n                onAddPurchase={handleAddToPurchase}\n                recipesPagination={authorRecipesPagination}\n                getRecipes={getRecipes}\n                onAuthorClick={handleAuthorClick}\n                selectedAuthor={selectedAuthor}\n                setSelectedAuthor={setSelectedAuthor}\n                onSubscribe={handleSubscribe}\n                onUnsubscribe={handleUnsubscribe}\n                subscriptions={subscriptions}\n                onDeletePurchase={handleDeletePurchase}\n                purchases={purchases}\n              />\n            </Route>\n\n            <Route>\n              <Redirect to=\"/\" />\n            </Route>\n\n          </Switch>\n\n          <InfoTooltip\n            isOpen={isOpenInfoTooltip}\n            onClose={closeAllPopups}\n            responseError={responseError}\n            setResponseError={setResponseError}\n          />\n\n        </main>\n        <Footer />\n      </CurrentUserContext.Provider>\n    </>\n  );\n}\n\nexport default App;\n","export default function downloadAsFile(data) {\n  const a = document.createElement('a');\n  const file = new Blob([data], { type: 'application/text' });\n  a.href = URL.createObjectURL(file);\n  a.download = 'example.txt';\n  a.click();\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS,\n      getFID,\n      getFCP,\n      getLCP,\n      getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}